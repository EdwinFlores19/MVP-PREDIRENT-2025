<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Comunidad de Propietarios - PrediRent</title>
    <style>
      /* Variables de color */
      :root {
        --naranja-principal: #ff7b54;
        --naranja-claro: #ffb26b;
        --verde-confirmacion: #93c47d;
        --verde-oscuro: #6b8e23;
        --fondo-claro: #f9f9f9;
        --texto-principal: #333333;
        --texto-secundario: #777777;
        --borde-suave: #e0e0e0;
      }

      /* Reset y estilos base */
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
          Oxygen, Ubuntu, Cantarell, sans-serif;
        background-color: var(--fondo-claro);
        color: var(--texto-principal);
        max-width: 480px;
        margin: 0 auto;
        overflow-x: hidden;
      }

      /* Header fijo */
      header {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        max-width: 480px;
        margin: 0 auto;
        background: white;
        padding: 16px 20px;
        display: flex;
        align-items: center;
        gap: 16px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
        z-index: 100;
      }

      .back-button {
        background: none;
        border: none;
        cursor: pointer;
        padding: 8px;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .back-button:active {
        opacity: 0.6;
      }

      header h2 {
        font-size: 20px;
        font-weight: 600;
        color: var(--texto-principal);
      }

      /* Controles de búsqueda */
      .search-controls {
        position: fixed;
        top: 68px;
        left: 0;
        right: 0;
        max-width: 480px;
        margin: 0 auto;
        background: white;
        padding: 12px 20px;
        display: flex;
        gap: 12px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        z-index: 99;
      }

      .search-wrapper {
        flex: 1;
        position: relative;
      }

      .search-icon {
        position: absolute;
        left: 12px;
        top: 50%;
        transform: translateY(-50%);
        pointer-events: none;
      }

      .search-input {
        width: 100%;
        padding: 12px 12px 12px 42px;
        border: 1px solid var(--borde-suave);
        border-radius: 8px;
        font-size: 14px;
        color: var(--texto-principal);
        background: var(--fondo-claro);
      }

      .search-input:focus {
        outline: none;
        border-color: var(--naranja-principal);
        background: white;
      }

      .search-input::placeholder {
        color: var(--texto-secundario);
      }

      .filter-button {
        padding: 12px 16px;
        background: white;
        border: 1px solid var(--borde-suave);
        border-radius: 8px;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.2s;
      }

      .filter-button:active {
        background: var(--fondo-claro);
      }

      /* Contenido principal */
      main {
        margin-top: 140px;
        padding: 16px 20px 32px;
        min-height: calc(100vh - 140px);
      }

      /* Tarjetas de contacto */
      .contact-card {
        background: white;
        border-radius: 12px;
        padding: 16px;
        margin-bottom: 12px;
        display: flex;
        gap: 16px;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);
        transition: all 0.2s;
      }

      .contact-card:active {
        transform: scale(0.98);
      }

      .avatar {
        width: 56px;
        height: 56px;
        min-width: 56px;
        border-radius: 50%;
        background: linear-gradient(
          135deg,
          var(--naranja-claro),
          var(--naranja-principal)
        );
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .contact-content {
        flex: 1;
        min-width: 0;
      }

      .contact-header {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        margin-bottom: 6px;
        gap: 12px;
      }

      .contact-name {
        font-size: 16px;
        font-weight: 600;
        color: var(--texto-principal);
      }

      .contact-location {
        display: flex;
        align-items: center;
        gap: 6px;
        font-size: 13px;
        color: var(--texto-secundario);
        margin-bottom: 10px;
      }

      .tags {
        display: flex;
        flex-wrap: wrap;
        gap: 6px;
        margin-bottom: 12px;
      }

      .tag {
        font-size: 11px;
        padding: 4px 10px;
        background: var(--borde-suave);
        color: var(--texto-secundario);
        border-radius: 12px;
        white-space: nowrap;
      }

      .contact-button {
        padding: 8px 20px;
        background: transparent;
        border: 1.5px solid var(--naranja-principal);
        border-radius: 8px;
        color: var(--naranja-principal);
        font-size: 14px;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.2s;
        width: 100%;
      }

      .contact-button:active {
        background: var(--naranja-principal);
        color: white;
      }

      /* Estado vacío */
      .empty-state {
        text-align: center;
        padding: 60px 20px;
        display: none;
      }

      .empty-state.visible {
        display: block;
      }

      .empty-state-icon {
        margin-bottom: 16px;
      }

      .empty-state p {
        color: var(--texto-secundario);
        font-size: 15px;
        line-height: 1.5;
      }

      /* Modal */
      .modal-overlay {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.5);
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 20px;
        z-index: 1000;
        opacity: 0;
        visibility: hidden;
        transition: opacity 0.3s, visibility 0.3s;
      }

      .modal-overlay.active {
        opacity: 1;
        visibility: visible;
      }

      .modal-content {
        background: white;
        border-radius: 16px;
        padding: 24px;
        width: 100%;
        max-width: 400px;
        max-height: 90vh;
        overflow-y: auto;
        transform: scale(0.9);
        opacity: 0;
        transition: transform 0.3s, opacity 0.3s;
      }

      .modal-overlay.active .modal-content {
        transform: scale(1);
        opacity: 1;
      }

      .modal-header {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        margin-bottom: 20px;
      }

      .modal-title {
        font-size: 18px;
        font-weight: 600;
        color: var(--texto-principal);
        padding-right: 20px;
      }

      .close-button {
        background: none;
        border: none;
        font-size: 24px;
        color: var(--texto-secundario);
        cursor: pointer;
        padding: 0;
        width: 32px;
        height: 32px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 50%;
        transition: background 0.2s;
      }

      .close-button:active {
        background: var(--borde-suave);
      }

      .modal-form {
        display: flex;
        flex-direction: column;
        gap: 16px;
      }

      .form-group {
        display: flex;
        flex-direction: column;
        gap: 8px;
      }

      .message-textarea {
        width: 100%;
        min-height: 140px;
        padding: 12px;
        border: 1px solid var(--borde-suave);
        border-radius: 8px;
        font-family: inherit;
        font-size: 14px;
        color: var(--texto-principal);
        resize: vertical;
      }

      .message-textarea:focus {
        outline: none;
        border-color: var(--naranja-principal);
      }

      .char-counter {
        text-align: right;
        font-size: 12px;
        color: var(--texto-secundario);
      }

      .help-text {
        font-size: 13px;
        color: var(--texto-secundario);
        line-height: 1.4;
        display: flex;
        align-items: flex-start;
        gap: 8px;
      }

      .modal-actions {
        display: flex;
        gap: 12px;
        margin-top: 8px;
      }

      .btn-primary {
        flex: 1;
        padding: 14px;
        background: var(--naranja-principal);
        color: white;
        border: none;
        border-radius: 8px;
        font-size: 15px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.2s;
      }

      .btn-primary:active {
        background: #e66a43;
        transform: scale(0.98);
      }

      .btn-secondary {
        flex: 1;
        padding: 14px;
        background: transparent;
        color: var(--texto-secundario);
        border: 1px solid var(--borde-suave);
        border-radius: 8px;
        font-size: 15px;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.2s;
      }

      .btn-secondary:active {
        background: var(--fondo-claro);
      }

      /* Ocultar elementos */
      .hidden {
        display: none !important;
      }

      /* Mensaje de éxito */
      .success-message {
        position: fixed;
        top: 20px;
        left: 50%;
        transform: translateX(-50%) translateY(-100px);
        background: var(--verde-confirmacion);
        color: white;
        padding: 16px 24px;
        border-radius: 8px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        z-index: 2000;
        opacity: 0;
        transition: all 0.4s;
        max-width: 90%;
        text-align: center;
        font-weight: 500;
      }

      .success-message.show {
        transform: translateX(-50%) translateY(0);
        opacity: 1;
      }
    </style>
  </head>
  <body>
    <!-- Header fijo -->
    <header>
      <button class="back-button" aria-label="Volver">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
          <path
            d="M15 18L9 12L15 6"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          />
        </svg>
      </button>
      <h2>Comunidad de Propietarios</h2>
    </header>

    <!-- Barra de búsqueda y filtros -->
    <div class="search-controls">
      <div class="search-wrapper">
        <svg
          class="search-icon"
          width="20"
          height="20"
          viewBox="0 0 24 24"
          fill="none"
        >
          <circle cx="11" cy="11" r="8" stroke="#777777" stroke-width="2" />
          <path
            d="M21 21L16.65 16.65"
            stroke="#777777"
            stroke-width="2"
            stroke-linecap="round"
          />
        </svg>
        <input
          type="search"
          class="search-input"
          id="searchInput"
          placeholder="Buscar por nombre o distrito..."
          autocomplete="off"
        />
      </div>
      <button class="filter-button" aria-label="Filtros">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
          <path
            d="M4 6H20M7 12H17M10 18H14"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
          />
        </svg>
      </button>
    </div>

    <!-- Contenido principal -->
    <main>
      <!-- Tarjetas de contacto -->
      <article class="contact-card" data-name="edwin r." data-district="surco">
        <div class="avatar">
          <svg width="32" height="32" viewBox="0 0 24 24" fill="white">
            <path
              d="M12 12C14.21 12 16 10.21 16 8C16 5.79 14.21 4 12 4C9.79 4 8 5.79 8 8C8 10.21 9.79 12 12 12ZM12 14C9.33 14 4 15.34 4 18V20H20V18C20 15.34 14.67 14 12 14Z"
            />
          </svg>
        </div>
        <div class="contact-content">
          <div class="contact-header">
            <h4 class="contact-name">Edwin R.</h4>
          </div>
          <p class="contact-location">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor">
              <path
                d="M12 2C8.13 2 5 5.13 5 9C5 14.25 12 22 12 22C12 22 19 14.25 19 9C19 5.13 15.87 2 12 2ZM12 11.5C10.62 11.5 9.5 10.38 9.5 9C9.5 7.62 10.62 6.5 12 6.5C13.38 6.5 14.5 7.62 14.5 9C14.5 10.38 13.38 11.5 12 11.5Z"
              />
            </svg>
            Propietario en Surco
          </p>
          <div class="tags">
            <span class="tag">Mantenimiento</span>
            <span class="tag">Legal</span>
            <span class="tag">Optimización de Precios</span>
          </div>
          <button class="contact-button" onclick="openModal('Edwin R.')">
            Contactar
          </button>
        </div>
      </article>

      <article
        class="contact-card"
        data-name="maría l."
        data-district="miraflores"
      >
        <div class="avatar">
          <svg width="32" height="32" viewBox="0 0 24 24" fill="white">
            <path
              d="M12 12C14.21 12 16 10.21 16 8C16 5.79 14.21 4 12 4C9.79 4 8 5.79 8 8C8 10.21 9.79 12 12 12ZM12 14C9.33 14 4 15.34 4 18V20H20V18C20 15.34 14.67 14 12 14Z"
            />
          </svg>
        </div>
        <div class="contact-content">
          <div class="contact-header">
            <h4 class="contact-name">María L.</h4>
          </div>
          <p class="contact-location">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor">
              <path
                d="M12 2C8.13 2 5 5.13 5 9C5 14.25 12 22 12 22C12 22 19 14.25 19 9C19 5.13 15.87 2 12 2ZM12 11.5C10.62 11.5 9.5 10.38 9.5 9C9.5 7.62 10.62 6.5 12 6.5C13.38 6.5 14.5 7.62 14.5 9C14.5 10.38 13.38 11.5 12 11.5Z"
              />
            </svg>
            Propietaria en Miraflores
          </p>
          <div class="tags">
            <span class="tag">Inquilinos</span>
            <span class="tag">Contratos</span>
            <span class="tag">Seguros</span>
          </div>
          <button class="contact-button" onclick="openModal('María L.')">
            Contactar
          </button>
        </div>
      </article>

      <article
        class="contact-card"
        data-name="carlos m."
        data-district="san isidro"
      >
        <div class="avatar">
          <svg width="32" height="32" viewBox="0 0 24 24" fill="white">
            <path
              d="M12 12C14.21 12 16 10.21 16 8C16 5.79 14.21 4 12 4C9.79 4 8 5.79 8 8C8 10.21 9.79 12 12 12ZM12 14C9.33 14 4 15.34 4 18V20H20V18C20 15.34 14.67 14 12 14Z"
            />
          </svg>
        </div>
        <div class="contact-content">
          <div class="contact-header">
            <h4 class="contact-name">Carlos M.</h4>
          </div>
          <p class="contact-location">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor">
              <path
                d="M12 2C8.13 2 5 5.13 5 9C5 14.25 12 22 12 22C12 22 19 14.25 19 9C19 5.13 15.87 2 12 2ZM12 11.5C10.62 11.5 9.5 10.38 9.5 9C9.5 7.62 10.62 6.5 12 6.5C13.38 6.5 14.5 7.62 14.5 9C14.5 10.38 13.38 11.5 12 11.5Z"
              />
            </svg>
            Propietario en San Isidro
          </p>
          <div class="tags">
            <span class="tag">Inversiones</span>
            <span class="tag">Mercado</span>
            <span class="tag">Rentabilidad</span>
          </div>
          <button class="contact-button" onclick="openModal('Carlos M.')">
            Contactar
          </button>
        </div>
      </article>

      <article class="contact-card" data-name="ana p." data-district="surco">
        <div class="avatar">
          <svg width="32" height="32" viewBox="0 0 24 24" fill="white">
            <path
              d="M12 12C14.21 12 16 10.21 16 8C16 5.79 14.21 4 12 4C9.79 4 8 5.79 8 8C8 10.21 9.79 12 12 12ZM12 14C9.33 14 4 15.34 4 18V20H20V18C20 15.34 14.67 14 12 14Z"
            />
          </svg>
        </div>
        <div class="contact-content">
          <div class="contact-header">
            <h4 class="contact-name">Ana P.</h4>
          </div>
          <p class="contact-location">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor">
              <path
                d="M12 2C8.13 2 5 5.13 5 9C5 14.25 12 22 12 22C12 22 19 14.25 19 9C19 5.13 15.87 2 12 2ZM12 11.5C10.62 11.5 9.5 10.38 9.5 9C9.5 7.62 10.62 6.5 12 6.5C13.38 6.5 14.5 7.62 14.5 9C14.5 10.38 13.38 11.5 12 11.5Z"
              />
            </svg>
            Propietaria en Surco
          </p>
          <div class="tags">
            <span class="tag">Renovaciones</span>
            <span class="tag">Decoración</span>
            <span class="tag">Plusvalía</span>
          </div>
          <button class="contact-button" onclick="openModal('Ana P.')">
            Contactar
          </button>
        </div>
      </article>

      <article
        class="contact-card"
        data-name="jorge s."
        data-district="la molina"
      >
        <div class="avatar">
          <svg width="32" height="32" viewBox="0 0 24 24" fill="white">
            <path
              d="M12 12C14.21 12 16 10.21 16 8C16 5.79 14.21 4 12 4C9.79 4 8 5.79 8 8C8 10.21 9.79 12 12 12ZM12 14C9.33 14 4 15.34 4 18V20H20V18C20 15.34 14.67 14 12 14Z"
            />
          </svg>
        </div>
        <div class="contact-content">
          <div class="contact-header">
            <h4 class="contact-name">Jorge S.</h4>
          </div>
          <p class="contact-location">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor">
              <path
                d="M12 2C8.13 2 5 5.13 5 9C5 14.25 12 22 12 22C12 22 19 14.25 19 9C19 5.13 15.87 2 12 2ZM12 11.5C10.62 11.5 9.5 10.38 9.5 9C9.5 7.62 10.62 6.5 12 6.5C13.38 6.5 14.5 7.62 14.5 9C14.5 10.38 13.38 11.5 12 11.5Z"
              />
            </svg>
            Propietario en La Molina
          </p>
          <div class="tags">
            <span class="tag">Impuestos</span>
            <span class="tag">Administración</span>
            <span class="tag">Documentación</span>
          </div>
          <button class="contact-button" onclick="openModal('Jorge S.')">
            Contactar
          </button>
        </div>
      </article>

      <!-- Estado vacío -->
      <div class="empty-state" id="emptyState">
        <div class="empty-state-icon">
          <svg width="64" height="64" viewBox="0 0 24 24" fill="none">
            <circle cx="12" cy="12" r="10" stroke="#E0E0E0" stroke-width="2" />
            <path
              d="M12 8V12M12 16H12.01"
              stroke="#E0E0E0"
              stroke-width="2"
              stroke-linecap="round"
            />
          </svg>
        </div>
        <p>No se encontraron propietarios.<br />¡Intenta con otra búsqueda!</p>
      </div>
    </main>

    <!-- Modal de contacto -->
    <div class="modal-overlay" id="modalOverlay">
      <div class="modal-content">
        <div class="modal-header">
          <h3 class="modal-title" id="modalTitle">Enviar mensaje a</h3>
          <button
            class="close-button"
            onclick="closeModal()"
            aria-label="Cerrar"
          >
            ×
          </button>
        </div>
        <form class="modal-form" id="contactForm" onsubmit="sendMessage(event)">
          <div class="form-group">
            <textarea
              class="message-textarea"
              id="messageText"
              placeholder="Escribe tu consulta o consejo aquí..."
              maxlength="500"
              required
            ></textarea>
            <div class="char-counter"><span id="charCount">0</span>/500</div>
          </div>
          <p class="help-text">
            <svg
              width="16"
              height="16"
              viewBox="0 0 24 24"
              fill="currentColor"
              style="flex-shrink: 0; margin-top: 2px"
            >
              <path
                d="M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM13 17H11V11H13V17ZM13 9H11V7H13V9Z"
              />
            </svg>
            Este mensaje se enviará de forma segura a través de PrediRent.
          </p>
          <div class="modal-actions">
            <button type="button" class="btn-secondary" onclick="closeModal()">
              Cancelar
            </button>
            <button type="submit" class="btn-primary">Enviar Mensaje</button>
          </div>
        </form>
      </div>
    </div>

    <!-- Mensaje de éxito -->
    <div class="success-message" id="successMessage">
      ✓ Mensaje enviado correctamente
    </div>

    <script>
      // Variables globales
      const searchInput = document.getElementById("searchInput");
      const contactCards = document.querySelectorAll(".contact-card");
      const emptyState = document.getElementById("emptyState");
      const modalOverlay = document.getElementById("modalOverlay");
      const modalTitle = document.getElementById("modalTitle");
      const messageText = document.getElementById("messageText");
      const charCount = document.getElementById("charCount");
      const successMessage = document.getElementById("successMessage");
      const contactForm = document.getElementById("contactForm");

      let currentContactName = "";

      // Búsqueda en tiempo real
      searchInput.addEventListener("input", function () {
        const searchTerm = this.value.toLowerCase().trim();
        let visibleCount = 0;

        contactCards.forEach((card) => {
          const name = card.getAttribute("data-name");
          const district = card.getAttribute("data-district");

          const matches =
            name.includes(searchTerm) || district.includes(searchTerm);

          if (matches) {
            card.classList.remove("hidden");
            visibleCount++;
          } else {
            card.classList.add("hidden");
          }
        });

        // Mostrar estado vacío si no hay resultados
        if (visibleCount === 0) {
          emptyState.classList.add("visible");
        } else {
          emptyState.classList.remove("visible");
        }
      });

      // Contador de caracteres
      messageText.addEventListener("input", function () {
        charCount.textContent = this.value.length;
      });

      // Abrir modal
      function openModal(name) {
        currentContactName = name;
        modalTitle.textContent = `Enviar mensaje a ${name}`;
        modalOverlay.classList.add("active");
        document.body.style.overflow = "hidden";
      }

      // Cerrar modal
      function closeModal() {
        modalOverlay.classList.remove("active");
        document.body.style.overflow = "";

        // Resetear formulario después de la animación
        setTimeout(() => {
          contactForm.reset();
          charCount.textContent = "0";
        }, 300);
      }

      // Cerrar modal al hacer click en el overlay
      modalOverlay.addEventListener("click", function (e) {
        if (e.target === modalOverlay) {
          closeModal();
        }
      });

      // Enviar mensaje
      function sendMessage(e) {
        e.preventDefault();

        const message = messageText.value.trim();

        if (message) {
          // Cerrar modal
          closeModal();

          // Mostrar mensaje de éxito
          setTimeout(() => {
            successMessage.classList.add("show");

            // Ocultar después de 3 segundos
            setTimeout(() => {
              successMessage.classList.remove("show");
            }, 3000);
          }, 400);

          // Log para demostración (en producción esto enviaría a un servidor)
          console.log("Mensaje enviado a:", currentContactName);
          console.log("Contenido:", message);
        }
      }

      // Cerrar modal con tecla Escape
      document.addEventListener("keydown", function (e) {
        if (e.key === "Escape" && modalOverlay.classList.contains("active")) {
          closeModal();
        }
      });

      // Botón de volver
      document
        .querySelector(".back-button")
        .addEventListener("click", function () {
          // En producción, esto navegaría al dashboard
          console.log("Volver al Dashboard");
          alert("Navegando al Dashboard...");
        });

      // Botón de filtros
      document
        .querySelector(".filter-button")
        .addEventListener("click", function () {
          // En producción, esto abriría un panel de filtros avanzados
          console.log("Abrir filtros");
          alert("Funcionalidad de filtros avanzados próximamente");
        });
    </script>
  </body>
</html>

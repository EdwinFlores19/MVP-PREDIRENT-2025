<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Notificaciones - PrediRent</title>
    <style>
      /* Variables de color */
      :root {
        --naranja-principal: #ff7b54;
        --naranja-claro: #ffb26b;
        --verde-confirmacion: #93c47d;
        --verde-oscuro: #6b8e23;
        --fondo-claro: #f9f9f9;
        --texto-principal: #333333;
        --texto-secundario: #777777;
        --borde-suave: #e0e0e0;
        --color-notificacion-nueva: #4a90e2;
      }

      /* Reset y estilos base */
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
          Oxygen, Ubuntu, Cantarell, sans-serif;
        background-color: var(--fondo-claro);
        color: var(--texto-principal);
        max-width: 480px;
        margin: 0 auto;
        overflow-x: hidden;
      }

      /* ===== POPUP DE ALERTA (PARTE A) ===== */

      .popup-overlay {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.6);
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 20px;
        z-index: 2000;
        opacity: 0;
        visibility: hidden;
        transition: opacity 0.3s, visibility 0.3s;
      }

      .popup-overlay.active {
        opacity: 1;
        visibility: visible;
      }

      .alert-modal {
        background: white;
        border-radius: 20px;
        padding: 32px 24px 24px;
        width: 100%;
        max-width: 340px;
        text-align: center;
        transform: scale(0.9);
        opacity: 0;
        transition: transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1),
          opacity 0.3s;
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
      }

      .popup-overlay.active .alert-modal {
        transform: scale(1);
        opacity: 1;
      }

      .alert-icon {
        width: 80px;
        height: 80px;
        margin: 0 auto 20px;
        background: linear-gradient(
          135deg,
          var(--naranja-principal),
          var(--naranja-claro)
        );
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        animation: pulse 2s infinite;
      }

      @keyframes pulse {
        0%,
        100% {
          transform: scale(1);
          box-shadow: 0 0 0 0 rgba(255, 123, 84, 0.4);
        }
        50% {
          transform: scale(1.05);
          box-shadow: 0 0 0 10px rgba(255, 123, 84, 0);
        }
      }

      .alert-modal h3 {
        font-size: 22px;
        font-weight: 700;
        color: var(--texto-principal);
        margin-bottom: 12px;
      }

      .alert-modal p {
        font-size: 15px;
        line-height: 1.6;
        color: var(--texto-secundario);
        margin-bottom: 28px;
      }

      .alert-actions {
        display: flex;
        flex-direction: column;
        gap: 12px;
      }

      .btn-alert-primary {
        width: 100%;
        padding: 16px;
        background: var(--naranja-principal);
        color: white;
        border: none;
        border-radius: 12px;
        font-size: 16px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.2s;
      }

      .btn-alert-primary:active {
        background: #e66a43;
        transform: scale(0.98);
      }

      .btn-alert-secondary {
        width: 100%;
        padding: 16px;
        background: transparent;
        color: var(--texto-secundario);
        border: 1.5px solid var(--borde-suave);
        border-radius: 12px;
        font-size: 15px;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.2s;
      }

      .btn-alert-secondary:active {
        background: var(--fondo-claro);
        transform: scale(0.98);
      }

      /* ===== VISTA DE NOTIFICACIONES (PARTE B) ===== */

      /* Header fijo */
      header {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        max-width: 480px;
        margin: 0 auto;
        background: white;
        z-index: 100;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
      }

      .header-top {
        padding: 16px 20px;
        display: flex;
        align-items: center;
        gap: 16px;
      }

      .back-button {
        background: none;
        border: none;
        cursor: pointer;
        padding: 8px;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .back-button:active {
        opacity: 0.6;
      }

      header h2 {
        font-size: 20px;
        font-weight: 600;
        color: var(--texto-principal);
      }

      /* Tabs de filtro */
      .filter-tabs {
        display: flex;
        padding: 0 20px 12px;
        gap: 8px;
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
      }

      .filter-tabs::-webkit-scrollbar {
        display: none;
      }

      .tab-button {
        padding: 10px 20px;
        background: transparent;
        border: 1.5px solid var(--borde-suave);
        border-radius: 20px;
        font-size: 14px;
        font-weight: 500;
        color: var(--texto-secundario);
        cursor: pointer;
        white-space: nowrap;
        transition: all 0.2s;
      }

      .tab-button.active {
        background: var(--naranja-principal);
        border-color: var(--naranja-principal);
        color: white;
      }

      .tab-button:active:not(.active) {
        background: var(--fondo-claro);
      }

      /* Contenido principal */
      main {
        margin-top: 120px;
        padding: 0 0 32px;
        min-height: calc(100vh - 120px);
      }

      /* Lista de notificaciones */
      .notifications-list {
        background: white;
      }

      .notification-item {
        padding: 16px 20px;
        display: flex;
        gap: 16px;
        border-bottom: 1px solid var(--borde-suave);
        cursor: pointer;
        transition: background 0.2s;
        position: relative;
      }

      .notification-item:active {
        background: var(--fondo-claro);
      }

      .notification-item.unread {
        background: rgba(74, 144, 226, 0.03);
      }

      .notification-icon {
        width: 48px;
        height: 48px;
        min-width: 48px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        align-self: flex-start;
      }

      .notification-icon.alert {
        background: linear-gradient(
          135deg,
          var(--naranja-claro),
          var(--naranja-principal)
        );
      }

      .notification-icon.message {
        background: linear-gradient(135deg, #7b68ee, #6a5acd);
      }

      .notification-icon.info {
        background: linear-gradient(
          135deg,
          var(--color-notificacion-nueva),
          #357abd
        );
      }

      .notification-content {
        flex: 1;
        min-width: 0;
      }

      .notification-title {
        font-size: 15px;
        font-weight: 600;
        color: var(--texto-principal);
        margin-bottom: 4px;
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .notification-message {
        font-size: 14px;
        line-height: 1.5;
        color: var(--texto-secundario);
        margin-bottom: 6px;
        overflow: hidden;
        text-overflow: ellipsis;
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
      }

      .notification-item.expanded .notification-message {
        -webkit-line-clamp: unset;
      }

      .notification-time {
        font-size: 12px;
        color: var(--texto-secundario);
      }

      .unread-badge {
        width: 10px;
        height: 10px;
        background: var(--color-notificacion-nueva);
        border-radius: 50%;
        position: absolute;
        top: 20px;
        right: 20px;
      }

      /* Estado vacío */
      .empty-state {
        text-align: center;
        padding: 80px 40px;
        display: none;
      }

      .empty-state.visible {
        display: block;
      }

      .empty-state-icon {
        width: 80px;
        height: 80px;
        margin: 0 auto 20px;
        background: var(--borde-suave);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .empty-state h4 {
        font-size: 18px;
        font-weight: 600;
        color: var(--texto-principal);
        margin-bottom: 8px;
      }

      .empty-state p {
        font-size: 15px;
        line-height: 1.5;
        color: var(--texto-secundario);
      }

      /* Botón flotante para mostrar popup */
      .floating-button {
        position: fixed;
        bottom: 24px;
        right: 20px;
        width: 60px;
        height: 60px;
        background: var(--naranja-principal);
        border: none;
        border-radius: 50%;
        box-shadow: 0 4px 12px rgba(255, 123, 84, 0.4);
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 50;
        transition: all 0.3s;
      }

      .floating-button:active {
        transform: scale(0.95);
      }

      /* Ocultar elementos */
      .hidden {
        display: none !important;
      }
    </style>
  </head>
  <body>
    <!-- ===== POPUP DE ALERTA CONTEXTUAL ===== -->
    <div class="popup-overlay" id="popupOverlay">
      <div class="alert-modal">
        <div class="alert-icon">
          <svg width="48" height="48" viewBox="0 0 24 24" fill="white">
            <path
              d="M12 2L2 7V17L12 22L22 17V7L12 2ZM12 4.18L19 7.82V16.18L12 19.82L5 16.18V7.82L12 4.18ZM12 8V13M12 15H12.01"
              stroke="white"
              stroke-width="2"
              stroke-linecap="round"
            />
          </svg>
        </div>
        <h3>¡Alerta de Mercado!</h3>
        <p>
          Debido al evento 'Festival Gastronómico', la demanda de alquileres en
          Surco ha aumentado. Te recomendamos ajustar el precio de tu propiedad.
        </p>
        <div class="alert-actions">
          <button class="btn-alert-primary" onclick="handleOpportunity()">
            Ver Oportunidad
          </button>
          <button class="btn-alert-secondary" onclick="closePopup()">
            Más tarde
          </button>
        </div>
      </div>
    </div>

    <!-- ===== VISTA DE NOTIFICACIONES ===== -->
    <header>
      <div class="header-top">
        <button class="back-button" onclick="goBack()" aria-label="Volver">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
            <path
              d="M15 18L9 12L15 6"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
          </svg>
        </button>
        <h2>Notificaciones</h2>
      </div>
      <div class="filter-tabs">
        <button
          class="tab-button active"
          data-filter="todas"
          onclick="filterNotifications('todas')"
        >
          Todas
        </button>
        <button
          class="tab-button"
          data-filter="alertas"
          onclick="filterNotifications('alertas')"
        >
          Alertas
        </button>
        <button
          class="tab-button"
          data-filter="mensajes"
          onclick="filterNotifications('mensajes')"
        >
          Mensajes
        </button>
      </div>
    </header>

    <main>
      <div class="notifications-list" id="notificationsList">
        <!-- Notificación 1: Alerta -->
        <div
          class="notification-item unread"
          data-type="alertas"
          onclick="toggleNotification(this)"
        >
          <div class="notification-icon alert">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="white">
              <path
                d="M12 22C13.1 22 14 21.1 14 20H10C10 21.1 10.9 22 12 22ZM18 16V11C18 7.93 16.37 5.36 13.5 4.68V4C13.5 3.17 12.83 2.5 12 2.5C11.17 2.5 10.5 3.17 10.5 4V4.68C7.64 5.36 6 7.92 6 11V16L4 18V19H20V18L18 16Z"
              />
            </svg>
          </div>
          <div class="notification-content">
            <div class="notification-title">Alerta de Precios en Surco</div>
            <p class="notification-message">
              La demanda ha aumentado un 15% en tu zona. Es un buen momento para
              ajustar tus precios y maximizar tus ingresos.
            </p>
            <small class="notification-time">Hace 5 minutos</small>
          </div>
          <span class="unread-badge"></span>
        </div>

        <!-- Notificación 2: Mensaje -->
        <div
          class="notification-item unread"
          data-type="mensajes"
          onclick="toggleNotification(this)"
        >
          <div class="notification-icon message">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="white">
              <path
                d="M20 4H4C2.9 4 2.01 4.9 2.01 6L2 18C2 19.1 2.9 20 4 20H20C21.1 20 22 19.1 22 18V6C22 4.9 21.1 4 20 4ZM20 8L12 13L4 8V6L12 11L20 6V8Z"
              />
            </svg>
          </div>
          <div class="notification-content">
            <div class="notification-title">Nuevo mensaje de María L.</div>
            <p class="notification-message">
              Hola, vi tu propiedad en Surco y me gustaría conocer más detalles
              sobre las condiciones de mantenimiento. ¿Podríamos hablar?
            </p>
            <small class="notification-time">Hace 1 hora</small>
          </div>
          <span class="unread-badge"></span>
        </div>

        <!-- Notificación 3: Info -->
        <div
          class="notification-item"
          data-type="alertas"
          onclick="toggleNotification(this)"
        >
          <div class="notification-icon info">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="white">
              <path
                d="M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM13 17H11V11H13V17ZM13 9H11V7H13V9Z"
              />
            </svg>
          </div>
          <div class="notification-content">
            <div class="notification-title">Actualización de la plataforma</div>
            <p class="notification-message">
              Hemos agregado nuevas funciones para mejorar tu experiencia.
              Explora el panel de análisis de mercado renovado.
            </p>
            <small class="notification-time">Hace 2 horas</small>
          </div>
        </div>

        <!-- Notificación 4: Alerta -->
        <div
          class="notification-item"
          data-type="alertas"
          onclick="toggleNotification(this)"
        >
          <div class="notification-icon alert">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="white">
              <path
                d="M12 22C13.1 22 14 21.1 14 20H10C10 21.1 10.9 22 12 22ZM18 16V11C18 7.93 16.37 5.36 13.5 4.68V4C13.5 3.17 12.83 2.5 12 2.5C11.17 2.5 10.5 3.17 10.5 4V4.68C7.64 5.36 6 7.92 6 11V16L4 18V19H20V18L18 16Z"
              />
            </svg>
          </div>
          <div class="notification-content">
            <div class="notification-title">Recomendación de optimización</div>
            <p class="notification-message">
              Tus propiedades en Miraflores tienen un 8% menos de visitas que el
              promedio. Te sugerimos actualizar las fotos y la descripción para
              atraer más inquilinos potenciales.
            </p>
            <small class="notification-time">Hace 5 horas</small>
          </div>
        </div>

        <!-- Notificación 5: Mensaje -->
        <div
          class="notification-item"
          data-type="mensajes"
          onclick="toggleNotification(this)"
        >
          <div class="notification-icon message">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="white">
              <path
                d="M20 4H4C2.9 4 2.01 4.9 2.01 6L2 18C2 19.1 2.9 20 4 20H20C21.1 20 22 19.1 22 18V6C22 4.9 21.1 4 20 4ZM20 8L12 13L4 8V6L12 11L20 6V8Z"
              />
            </svg>
          </div>
          <div class="notification-content">
            <div class="notification-title">Respuesta de Carlos M.</div>
            <p class="notification-message">
              Gracias por tu mensaje. Te comparto mi experiencia con los
              contratos de arrendamiento y cómo manejo la documentación legal.
            </p>
            <small class="notification-time">Ayer</small>
          </div>
        </div>

        <!-- Notificación 6: Alerta -->
        <div
          class="notification-item"
          data-type="alertas"
          onclick="toggleNotification(this)"
        >
          <div class="notification-icon alert">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="white">
              <path
                d="M12 22C13.1 22 14 21.1 14 20H10C10 21.1 10.9 22 12 22ZM18 16V11C18 7.93 16.37 5.36 13.5 4.68V4C13.5 3.17 12.83 2.5 12 2.5C11.17 2.5 10.5 3.17 10.5 4V4.68C7.64 5.36 6 7.92 6 11V16L4 18V19H20V18L18 16Z"
              />
            </svg>
          </div>
          <div class="notification-content">
            <div class="notification-title">Nueva oportunidad detectada</div>
            <p class="notification-message">
              Se ha identificado un incremento en búsquedas de propiedades de 2
              dormitorios en San Isidro. Considera resaltar tus propiedades
              similares.
            </p>
            <small class="notification-time">Hace 2 días</small>
          </div>
        </div>
      </div>

      <!-- Estado vacío -->
      <div class="empty-state" id="emptyState">
        <div class="empty-state-icon">
          <svg width="48" height="48" viewBox="0 0 24 24" fill="#999">
            <path
              d="M12 22C13.1 22 14 21.1 14 20H10C10 21.1 10.9 22 12 22ZM18 16V11C18 7.93 16.37 5.36 13.5 4.68V4C13.5 3.17 12.83 2.5 12 2.5C11.17 2.5 10.5 3.17 10.5 4V4.68C7.64 5.36 6 7.92 6 11V16L4 18V19H20V18L18 16Z"
            />
            <line
              x1="2"
              y1="2"
              x2="22"
              y2="22"
              stroke="#999"
              stroke-width="2"
            />
          </svg>
        </div>
        <h4>Todo está al día</h4>
        <p>No tienes notificaciones nuevas por ahora.</p>
      </div>
    </main>

    <!-- Botón flotante para demo del popup -->
    <button
      class="floating-button"
      onclick="showPopup()"
      title="Mostrar alerta de ejemplo"
    >
      <svg width="28" height="28" viewBox="0 0 24 24" fill="white">
        <path
          d="M12 22C13.1 22 14 21.1 14 20H10C10 21.1 10.9 22 12 22ZM18 16V11C18 7.93 16.37 5.36 13.5 4.68V4C13.5 3.17 12.83 2.5 12 2.5C11.17 2.5 10.5 3.17 10.5 4V4.68C7.64 5.36 6 7.92 6 11V16L4 18V19H20V18L18 16Z"
        />
      </svg>
    </button>

    <script>
      // Variables globales
      const popupOverlay = document.getElementById("popupOverlay");
      const notificationsList = document.getElementById("notificationsList");
      const emptyState = document.getElementById("emptyState");
      const allNotifications = document.querySelectorAll(".notification-item");
      const tabButtons = document.querySelectorAll(".tab-button");

      let currentFilter = "todas";

      // Mostrar popup automáticamente después de 2 segundos (demo)
      setTimeout(() => {
        showPopup();
      }, 2000);

      // Funciones del Popup
      function showPopup() {
        popupOverlay.classList.add("active");
        document.body.style.overflow = "hidden";
      }

      function closePopup() {
        popupOverlay.classList.remove("active");
        document.body.style.overflow = "";
      }

      function handleOpportunity() {
        closePopup();
        alert("Navegando a la página de edición de propiedad...");
        console.log("Acción: Ver oportunidad de mercado");
      }

      // Cerrar popup al hacer clic en el overlay
      popupOverlay.addEventListener("click", function (e) {
        if (e.target === popupOverlay) {
          closePopup();
        }
      });

      // Cerrar popup con tecla Escape
      document.addEventListener("keydown", function (e) {
        if (e.key === "Escape" && popupOverlay.classList.contains("active")) {
          closePopup();
        }
      });

      // Funciones de Notificaciones
      function toggleNotification(element) {
        // Expandir/contraer notificación
        element.classList.toggle("expanded");

        // Marcar como leída
        if (element.classList.contains("unread")) {
          element.classList.remove("unread");
          const badge = element.querySelector(".unread-badge");
          if (badge) {
            badge.style.transform = "scale(0)";
            setTimeout(() => badge.remove(), 200);
          }
        }
      }

      function filterNotifications(filter) {
        currentFilter = filter;

        // Actualizar tabs
        tabButtons.forEach((btn) => {
          btn.classList.toggle("active", btn.dataset.filter === filter);
        });

        // Filtrar notificaciones
        let visibleCount = 0;

        allNotifications.forEach((notification) => {
          const type = notification.dataset.type;
          const shouldShow = filter === "todas" || type === filter;

          notification.classList.toggle("hidden", !shouldShow);
          if (shouldShow) visibleCount++;
        });

        // Mostrar estado vacío si no hay resultados
        if (visibleCount === 0) {
          notificationsList.classList.add("hidden");
          emptyState.classList.add("visible");
        } else {
          notificationsList.classList.remove("hidden");
          emptyState.classList.remove("visible");
        }
      }

      function goBack() {
        console.log("Volver al Dashboard");
        alert("Navegando al Dashboard...");
      }

      // Marcar todas como leídas (función auxiliar)
      function markAllAsRead() {
        allNotifications.forEach((notification) => {
          if (notification.classList.contains("unread")) {
            notification.classList.remove("unread");
            const badge = notification.querySelector(".unread-badge");
            if (badge) badge.remove();
          }
        });
      }
    </script>
  </body>
</html>

<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PrediRent - Comunidad de Propietarios</title>
  <style>
    /* ============================================
       VARIABLES CSS - PALETA DE COLORES
    ============================================ */
    :root {
      --naranja-principal: #FF7B54;
      --naranja-claro: #FFB26B;
      --verde-confirmacion: #93C47D;
      --verde-oscuro: #6B8E23;
      --fondo-claro: #F9F9F9;
      --texto-principal: #333333;
      --texto-secundario: #777777;
      --borde-suave: #E0E0E0;
    }

    /* ============================================
       ESTILOS GENERALES
    ============================================ */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      background: linear-gradient(180deg, #FFF5F0 0%, var(--fondo-claro) 100%);
      color: var(--texto-principal);
      max-width: 480px;
      margin: 0 auto;
      min-height: 100vh;
      overflow-x: hidden;
    }

    /* ============================================
       HEADER FIJO CON GRADIENTE
    ============================================ */
    header {
      position: fixed;
      top: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 100%;
      max-width: 480px;
      background: linear-gradient(135deg, var(--naranja-principal) 0%, var(--naranja-claro) 100%);
      padding: 16px 20px 20px;
      box-shadow: 0 4px 16px rgba(255, 123, 84, 0.25);
      z-index: 100;
      border-radius: 0 0 24px 24px;
    }

    .header-content {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 16px;
    }

    .btn-back {
      background: rgba(255, 255, 255, 0.25);
      border: none;
      padding: 10px;
      border-radius: 12px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s;
      backdrop-filter: blur(10px);
    }

    .btn-back:active {
      transform: scale(0.95);
      background: rgba(255, 255, 255, 0.35);
    }

    header h2 {
      font-size: 22px;
      font-weight: 700;
      color: white;
      flex: 1;
      text-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }

    .community-stats {
      display: flex;
      gap: 12px;
      margin-top: 12px;
    }

    .stat-card {
      flex: 1;
      background: rgba(255, 255, 255, 0.25);
      backdrop-filter: blur(10px);
      padding: 12px;
      border-radius: 14px;
      text-align: center;
      border: 1px solid rgba(255, 255, 255, 0.3);
    }

    .stat-number {
      font-size: 24px;
      font-weight: 700;
      color: white;
      line-height: 1;
      margin-bottom: 4px;
    }

    .stat-label {
      font-size: 11px;
      color: rgba(255, 255, 255, 0.9);
      font-weight: 500;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    /* ============================================
       BARRA DE BÚSQUEDA Y FILTROS
    ============================================ */
    .search-section {
      position: fixed;
      top: 138px;
      left: 50%;
      transform: translateX(-50%);
      width: 100%;
      max-width: 480px;
      background-color: transparent;
      padding: 0 20px 16px;
      z-index: 99;
    }

    .search-container {
      display: flex;
      gap: 10px;
      align-items: center;
    }

    .search-input-wrapper {
      flex: 1;
      position: relative;
    }

    .search-input-wrapper svg {
      position: absolute;
      left: 16px;
      top: 50%;
      transform: translateY(-50%);
      pointer-events: none;
      z-index: 1;
    }

    .search-input {
      width: 100%;
      padding: 16px 16px 16px 48px;
      border: 2px solid white;
      border-radius: 16px;
      font-size: 15px;
      color: var(--texto-principal);
      background-color: white;
      box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08);
      transition: all 0.3s;
    }

    .search-input:focus {
      outline: none;
      border-color: var(--naranja-principal);
      box-shadow: 0 4px 20px rgba(255, 123, 84, 0.2);
    }

    .btn-filter {
      padding: 16px;
      border: 2px solid white;
      border-radius: 16px;
      background-color: white;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s;
      box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08);
      position: relative;
    }

    .btn-filter:active {
      transform: scale(0.95);
    }

    .btn-filter.active {
      background: linear-gradient(135deg, var(--naranja-principal) 0%, var(--naranja-claro) 100%);
      border-color: var(--naranja-principal);
    }

    .btn-filter.active svg path {
      stroke: white;
    }

    .filter-badge {
      position: absolute;
      top: -6px;
      right: -6px;
      background-color: var(--verde-confirmacion);
      color: white;
      width: 20px;
      height: 20px;
      border-radius: 50%;
      font-size: 11px;
      font-weight: 700;
      display: none;
      align-items: center;
      justify-content: center;
      border: 2px solid white;
    }

    .filter-badge.active {
      display: flex;
    }

    /* ============================================
       SECCIÓN DE CATEGORÍAS RÁPIDAS
    ============================================ */
    .quick-filters {
      padding: 0 20px;
      margin-bottom: 20px;
    }

    .quick-filters-scroll {
      display: flex;
      gap: 10px;
      overflow-x: auto;
      padding-bottom: 8px;
      scrollbar-width: none;
      -ms-overflow-style: none;
    }

    .quick-filters-scroll::-webkit-scrollbar {
      display: none;
    }

    .quick-filter-btn {
      flex-shrink: 0;
      padding: 10px 18px;
      border: 2px solid var(--borde-suave);
      border-radius: 20px;
      background-color: white;
      color: var(--texto-secundario);
      font-size: 13px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
      white-space: nowrap;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .quick-filter-btn.active {
      background: linear-gradient(135deg, var(--naranja-principal) 0%, var(--naranja-claro) 100%);
      color: white;
      border-color: var(--naranja-principal);
      box-shadow: 0 4px 12px rgba(255, 123, 84, 0.3);
    }

    /* ============================================
       CONTENIDO PRINCIPAL
    ============================================ */
    main {
      padding: 218px 20px 24px;
      min-height: 100vh;
    }

    .section-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 16px;
    }

    .section-title {
      font-size: 18px;
      font-weight: 700;
      color: var(--texto-principal);
    }

    .results-count {
      font-size: 13px;
      color: var(--texto-secundario);
      background-color: white;
      padding: 6px 14px;
      border-radius: 12px;
      border: 1px solid var(--borde-suave);
    }

    .contacts-list {
      display: flex;
      flex-direction: column;
      gap: 16px;
    }

    /* ============================================
       TARJETA DE CONTACTO MEJORADA
    ============================================ */
    .contact-card {
      background: white;
      border-radius: 20px;
      padding: 18px;
      box-shadow: 0 4px 16px rgba(0, 0, 0, 0.06);
      border: 2px solid transparent;
      transition: all 0.3s;
      position: relative;
      overflow: hidden;
    }

    .contact-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 4px;
      height: 100%;
      background: linear-gradient(180deg, var(--naranja-principal) 0%, var(--naranja-claro) 100%);
      opacity: 0;
      transition: opacity 0.3s;
    }

    .contact-card:active {
      transform: scale(0.98);
      border-color: var(--naranja-claro);
    }

    .contact-card:active::before {
      opacity: 1;
    }

    .contact-header {
      display: flex;
      gap: 14px;
      align-items: flex-start;
      margin-bottom: 14px;
    }

    .contact-avatar {
      width: 64px;
      height: 64px;
      border-radius: 18px;
      background: linear-gradient(135deg, var(--naranja-claro) 0%, var(--naranja-principal) 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
      box-shadow: 0 4px 12px rgba(255, 123, 84, 0.25);
      position: relative;
    }

    .avatar-badge {
      position: absolute;
      bottom: -2px;
      right: -2px;
      width: 18px;
      height: 18px;
      background-color: var(--verde-confirmacion);
      border: 3px solid white;
      border-radius: 50%;
    }

    .contact-info {
      flex: 1;
      min-width: 0;
    }

    .contact-name {
      font-size: 17px;
      font-weight: 700;
      color: var(--texto-principal);
      margin-bottom: 6px;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .verified-badge {
      width: 16px;
      height: 16px;
      background: linear-gradient(135deg, var(--naranja-principal) 0%, var(--naranja-claro) 100%);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .contact-location {
      font-size: 14px;
      color: var(--texto-secundario);
      margin-bottom: 4px;
      display: flex;
      align-items: center;
      gap: 4px;
    }

    .contact-meta {
      display: flex;
      gap: 12px;
      font-size: 12px;
      color: var(--texto-secundario);
      margin-top: 6px;
    }

    .meta-item {
      display: flex;
      align-items: center;
      gap: 4px;
    }

    .interests {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-bottom: 14px;
    }

    .interest-tag {
      font-size: 12px;
      padding: 6px 12px;
      background: linear-gradient(135deg, #FFF5F0 0%, #FFE8DC 100%);
      color: var(--naranja-principal);
      border-radius: 16px;
      border: 1px solid rgba(255, 123, 84, 0.2);
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 4px;
    }

    .contact-actions {
      display: flex;
      gap: 10px;
    }

    .btn-contact {
      flex: 1;
      padding: 14px 20px;
      border: none;
      border-radius: 14px;
      background: linear-gradient(135deg, var(--naranja-principal) 0%, var(--naranja-claro) 100%);
      color: white;
      font-size: 15px;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.3s;
      box-shadow: 0 4px 12px rgba(255, 123, 84, 0.3);
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }

    .btn-contact:active {
      transform: translateY(2px);
      box-shadow: 0 2px 8px rgba(255, 123, 84, 0.3);
    }

    .btn-view-profile {
      padding: 14px 18px;
      border: 2px solid var(--borde-suave);
      border-radius: 14px;
      background-color: white;
      color: var(--texto-secundario);
      font-size: 15px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .btn-view-profile:active {
      background-color: var(--fondo-claro);
      transform: scale(0.96);
    }

    /* ============================================
       MENSAJE DE BÚSQUEDA VACÍA
    ============================================ */
    .no-results {
      text-align: center;
      padding: 80px 20px;
      display: none;
    }

    .no-results.visible {
      display: block;
    }

    .no-results-icon {
      width: 100px;
      height: 100px;
      margin: 0 auto 24px;
      background: linear-gradient(135deg, #FFF5F0 0%, #FFE8DC 100%);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      border: 3px solid white;
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.08);
    }

    .no-results h3 {
      font-size: 20px;
      color: var(--texto-principal);
      margin-bottom: 10px;
      font-weight: 700;
    }

    .no-results p {
      font-size: 15px;
      color: var(--texto-secundario);
      line-height: 1.6;
      margin-bottom: 24px;
    }

    .btn-clear-search {
      padding: 14px 28px;
      border: 2px solid var(--naranja-principal);
      border-radius: 14px;
      background-color: transparent;
      color: var(--naranja-principal);
      font-size: 15px;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.3s;
    }

    .btn-clear-search:active {
      background-color: var(--naranja-principal);
      color: white;
    }

    /* ============================================
       MODAL DE CONTACTO MEJORADO
    ============================================ */
    .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.6);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 1000;
      padding: 20px;
      animation: fadeIn 0.3s ease;
      backdrop-filter: blur(4px);
    }

    .modal-overlay.active {
      display: flex;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
      }
      to {
        opacity: 1;
      }
    }

    .modal-content {
      background: white;
      border-radius: 24px;
      padding: 0;
      width: 100%;
      max-width: 400px;
      box-shadow: 0 16px 48px rgba(0, 0, 0, 0.3);
      animation: scaleIn 0.3s ease;
      overflow: hidden;
    }

    @keyframes scaleIn {
      from {
        transform: scale(0.9) translateY(20px);
        opacity: 0;
      }
      to {
        transform: scale(1) translateY(0);
        opacity: 1;
      }
    }

    .modal-header {
      background: linear-gradient(135deg, var(--naranja-principal) 0%, var(--naranja-claro) 100%);
      padding: 24px;
      text-align: center;
      position: relative;
    }

    .modal-avatar {
      width: 72px;
      height: 72px;
      margin: 0 auto 12px;
      border-radius: 20px;
      background: rgba(255, 255, 255, 0.25);
      display: flex;
      align-items: center;
      justify-content: center;
      backdrop-filter: blur(10px);
      border: 3px solid white;
      box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
    }

    .modal-header h3 {
      font-size: 20px;
      font-weight: 700;
      color: white;
      margin-bottom: 6px;
    }

    .modal-header p {
      font-size: 13px;
      color: rgba(255, 255, 255, 0.9);
    }

    .modal-body {
      padding: 24px;
    }

    .form-group {
      margin-bottom: 20px;
    }

    .form-label {
      display: block;
      font-size: 14px;
      font-weight: 600;
      color: var(--texto-principal);
      margin-bottom: 10px;
    }

    .modal-body textarea {
      width: 100%;
      min-height: 140px;
      padding: 16px;
      border: 2px solid var(--borde-suave);
      border-radius: 16px;
      font-size: 15px;
      font-family: inherit;
      color: var(--texto-principal);
      resize: vertical;
      transition: all 0.3s;
      background-color: var(--fondo-claro);
    }

    .modal-body textarea:focus {
      outline: none;
      border-color: var(--naranja-principal);
      background-color: white;
      box-shadow: 0 0 0 4px rgba(255, 123, 84, 0.1);
    }

    .char-counter {
      text-align: right;
      font-size: 12px;
      color: var(--texto-secundario);
      margin-top: 8px;
    }

    .quick-messages {
      margin-bottom: 20px;
    }

    .quick-message-btn {
      width: 100%;
      padding: 12px 16px;
      margin-bottom: 8px;
      border: 2px solid var(--borde-suave);
      border-radius: 12px;
      background-color: white;
      color: var(--texto-secundario);
      font-size: 13px;
      text-align: left;
      cursor: pointer;
      transition: all 0.3s;
    }

    .quick-message-btn:active {
      background-color: var(--fondo-claro);
      border-color: var(--naranja-principal);
      color: var(--naranja-principal);
    }

    .modal-actions {
      display: flex;
      gap: 12px;
      padding: 0 24px 24px;
    }

    .btn-cancel {
      flex: 1;
      padding: 16px;
      border: 2px solid var(--borde-suave);
      border-radius: 14px;
      background-color: white;
      color: var(--texto-secundario);
      font-size: 15px;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.3s;
    }

    .btn-cancel:active {
      background-color: var(--fondo-claro);
      transform: scale(0.98);
    }

    .btn-send {
      flex: 1;
      padding: 16px;
      border: none;
      border-radius: 14px;
      background: linear-gradient(135deg, var(--naranja-principal) 0%, var(--naranja-claro) 100%);
      color: white;
      font-size: 15px;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.3s;
      box-shadow: 0 4px 12px rgba(255, 123, 84, 0.3);
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }

    .btn-send:active {
      transform: translateY(2px);
      box-shadow: 0 2px 8px rgba(255, 123, 84, 0.3);
    }

    /* ============================================
       MENSAJE DE ÉXITO
    ============================================ */
    .success-message {
      position: fixed;
      top: 80px;
      left: 50%;
      transform: translateX(-50%) translateY(-150px);
      background: linear-gradient(135deg, var(--verde-confirmacion) 0%, var(--verde-oscuro) 100%);
      color: white;
      padding: 16px 24px;
      border-radius: 16px;
      font-size: 15px;
      font-weight: 600;
      box-shadow: 0 8px 24px rgba(147, 196, 125, 0.4);
      z-index: 2000;
      opacity: 0;
      transition: all 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
      display: flex;
      align-items: center;
      gap: 12px;
      max-width: 90%;
    }

    .success-message.show {
      transform: translateX(-50%) translateY(0);
      opacity: 1;
    }

    .success-icon {
      width: 28px;
      height: 28px;
      background-color: rgba(255, 255, 255, 0.25);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
    }

    /* ============================================
       PANEL DE FILTROS MEJORADO
    ============================================ */
    .filters-panel {
      position: fixed;
      bottom: -100%;
      left: 50%;
      transform: translateX(-50%);
      width: 100%;
      max-width: 480px;
      background: white;
      border-radius: 24px 24px 0 0;
      padding: 24px 20px 32px;
      box-shadow: 0 -8px 32px rgba(0, 0, 0, 0.2);
      z-index: 1001;
      transition: bottom 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
      max-height: 80vh;
      overflow-y: auto;
    }

    .filters-panel.active {
      bottom: 0;
    }

    .filters-handle {
      width: 40px;
      height: 5px;
      background-color: var(--borde-suave);
      border-radius: 3px;
      margin: 0 auto 20px;
    }

    .filters-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 24px;
    }

    .filters-header h3 {
      font-size: 20px;
      font-weight: 700;
      color: var(--texto-principal);
    }

    .btn-close-filters {
      background: var(--fondo-claro);
      border: none;
      width: 36px;
      height: 36px;
      border-radius: 12px;
      cursor: pointer;
      color: var(--texto-secundario);
      font-size: 24px;
      line-height: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s;
    }

    .btn-close-filters:active {
      background-color: var(--borde-suave);
      transform: scale(0.95);
    }

    .filter-group {
      margin-bottom: 28px;
    }

    .filter-group-header {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 14px;
    }

    .filter-group label {
      font-size: 15px;
      font-weight: 700;
      color: var(--texto-principal);
      flex: 1;
    }

    .filter-count {
      font-size: 12px;
      padding: 4px 10px;
      background-color: var(--naranja-principal);
      color: white;
      border-radius: 10px;
      font-weight: 600;
    }

    .filter-options {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 10px;
    }

    .filter-option {
      padding: 14px 16px;
      border: 2px solid var(--borde-suave);
      border-radius: 14px;
      background-color: white;
      color: var(--texto-secundario);
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
      text-align: center;
    }

    .filter-option:active {
      transform: scale(0.97);
    }

    .filter-option.active {
      background: linear-gradient(135deg, var(--naranja-principal) 0%, var(--naranja-claro) 100%);
      color: white;
      border-color: var(--naranja-principal);
      box-shadow: 0 4px 12px rgba(255, 123, 84, 0.3);
    }

    .filters-actions {
      display: flex;
      gap: 12px;
      margin-top: 24px;
      padding-top: 20px;
      border-top: 2px solid var(--fondo-claro);
    }

    .btn-clear-filters {
      flex: 1;
      padding: 16px;
      border: 2px solid var(--borde-suave);
      border-radius: 14px;
      background-color: white;
      color: var(--texto-secundario);
      font-size: 15px;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.3s;
    }

    .btn-clear-filters:active {
      background-color: var(--fondo-claro);
      transform: scale(0.98);
    }

    .btn-apply-filters {
      flex: 1;
      padding: 16px;
      border: none;
      border-radius: 14px;
      background: linear-gradient(135deg, var(--naranja-principal) 0%, var(--naranja-claro) 100%);
      color: white;
      font-size: 15px;
      font-weight: 700;
      cursor: pointer;
      box-shadow: 0 4px 12px rgba(255, 123, 84, 0.3);
      transition: all 0.3s;
    }

    .btn-apply-filters:active {
      transform: translateY(2px);
      box-shadow: 0 2px 8px rgba(255, 123, 84, 0.3);
    }

    /* ============================================
       OVERLAY PARA PANEL DE FILTROS
    ============================================ */
    .filters-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.5);
      z-index: 1000;
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s;
      backdrop-filter: blur(2px);
    }

    .filters-overlay.active {
      opacity: 1;
      visibility: visible;
    }
  </style>
</head>
<body>

  <!-- ============================================
       HEADER FIJO CON GRADIENTE
  ============================================ -->
  <header>
    <div class="header-content">
      <button class="btn-back" aria-label="Volver">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
          <path d="M15 18L9 12L15 6" stroke="white" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </button>
      <h2>Comunidad de Propietarios</h2>
    </div>
    <div class="community-stats">
      <div class="stat-card">
        <div class="stat-number">247</div>
        <div class="stat-label">Miembros</div>
      </div>
      <div class="stat-card">
        <div class="stat-number">89</div>
        <div class="stat-label">En línea</div>
      </div>
      <div class="stat-card">
        <div class="stat-number">1.2k</div>
        <div class="stat-label">Mensajes</div>
      </div>
    </div>
  </header>

  <!-- ============================================
       BARRA DE BÚSQUEDA Y FILTROS
  ============================================ -->
  <div class="search-section">
    <div class="search-container">
      <div class="search-input-wrapper">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
          <circle cx="11" cy="11" r="8" stroke="#777777" stroke-width="2"/>
          <path d="M21 21L16.65 16.65" stroke="#777777" stroke-width="2" stroke-linecap="round"/>
        </svg>
        <input 
          type="search" 
          class="search-input" 
          placeholder="Buscar por nombre o distrito..."
          id="searchInput"
          autocomplete="off"
        >
      </div>
      <button class="btn-filter" id="btnFilter" aria-label="Filtros">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
          <path d="M4 6H20M7 12H17M10 18H14" stroke="#777777" stroke-width="2.5" stroke-linecap="round"/>
        </svg>
        <div class="filter-badge" id="filterBadge">0</div>
      </button>
    </div>
  </div>

  <!-- ============================================
       CONTENIDO PRINCIPAL
  ============================================ -->
  <main>
    <!-- Filtros Rápidos -->
    <div class="quick-filters">
      <div class="quick-filters-scroll">
        <button class="quick-filter-btn active" data-quick="todos">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
            <path d="M17 21V19C17 17.9391 16.5786 16.9217 15.8284 16.1716C15.0783 15.4214 14.0609 15 13 15H5C3.93913 15 2.92172 15.4214 2.17157 16.1716C1.42143 16.9217 1 17.9391 1 19V21" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            <circle cx="9" cy="7" r="4" stroke="currentColor" stroke-width="2"/>
            <path d="M23 21V19C22.9993 18.1137 22.7044 17.2528 22.1614 16.5523C21.6184 15.8519 20.8581 15.3516 20 15.13" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            <path d="M16 3.13C16.8604 3.35031 17.623 3.85071 18.1676 4.55232C18.7122 5.25392 19.0078 6.11683 19.0078 7.005C19.0078 7.89317 18.7122 8.75608 18.1676 9.45768C17.623 10.1593 16.8604 10.6597 16 10.88" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          </svg>
          Todos
        </button>
        <button class="quick-filter-btn" data-quick="verificados">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
            <path d="M9 12L11 14L15 10M21 12C21 13.1819 20.7672 14.3522 20.3149 15.4442C19.8626 16.5361 19.1997 17.5282 18.364 18.364C17.5282 19.1997 16.5361 19.8626 15.4442 20.3149C14.3522 20.7672 13.1819 21 12 21C10.8181 21 9.64778 20.7672 8.55585 20.3149C7.46392 19.8626 6.47177 19.1997 5.63604 18.364C4.80031 17.5282 4.13738 16.5361 3.68508 15.4442C3.23279 14.3522 3 13.1819 3 12C3 9.61305 3.94821 7.32387 5.63604 5.63604C7.32387 3.94821 9.61305 3 12 3C14.3869 3 16.6761 3.94821 18.364 5.63604C20.0518 7.32387 21 9.61305 21 12Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          Verificados
        </button>
        <button class="quick-filter-btn" data-quick="activos">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
            <circle cx="12" cy="12" r="3" fill="currentColor"/>
          </svg>
          Activos Ahora
        </button>
        <button class="quick-filter-btn" data-quick="nuevos">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
            <path d="M12 5V19M5 12H19" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"/>
          </svg>
          Nuevos
        </button>
      </div>
    </div>

    <!-- Encabezado de Sección -->
    <div class="section-header">
      <h3 class="section-title">Propietarios Disponibles</h3>
      <span class="results-count" id="resultsCount">8 personas</span>
    </div>

    <!-- Lista de Contactos -->
    <div class="contacts-list" id="contactsList">
      <!-- Las tarjetas se generan dinámicamente con JavaScript -->
    </div>

    <!-- Mensaje cuando no hay resultados -->
    <div class="no-results" id="noResults">
      <div class="no-results-icon">
        <svg width="48" height="48" viewBox="0 0 24 24" fill="none">
          <circle cx="11" cy="11" r="8" stroke="#FF7B54" stroke-width="2"/>
          <path d="M21 21L16.65 16.65" stroke="#FF7B54" stroke-width="2" stroke-linecap="round"/>
          <line x1="8" y1="11" x2="14" y2="11" stroke="#FF7B54" stroke-width="2" stroke-linecap="round"/>
        </svg>
      </div>
      <h3>No encontramos resultados</h3>
      <p>No hay propietarios que coincidan con tu búsqueda. Intenta con otros términos o ajusta los filtros.</p>
      <button class="btn-clear-search" id="btnClearSearch">Limpiar Búsqueda</button>
    </div>
  </main>

  <!-- ============================================
       MODAL DE CONTACTO
  ============================================ -->
  <div class="modal-overlay" id="modalOverlay">
    <div class="modal-content">
      <div class="modal-header">
        <div class="modal-avatar">
          <svg width="40" height="40" viewBox="0 0 24 24" fill="none">
            <path d="M20 21V19C20 17.9391 19.5786 16.9217 18.8284 16.1716C18.0783 15.4214 17.0609 15 16 15H8C6.93913 15 5.92172 15.4214 5.17157 16.1716C4.42143 16.9217 4 17.9391 4 19V21" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <circle cx="12" cy="7" r="4" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </div>
        <h3 id="modalTitle">Enviar mensaje</h3>
        <p>Tu mensaje será enviado de forma privada</p>
      </div>
      <div class="modal-body">
        <div class="quick-messages">
          <div class="form-label">Mensajes rápidos</div>
          <button class="quick-message-btn" data-message="¡Hola! Me gustaría intercambiar experiencias sobre la gestión de propiedades.">
            👋 Intercambiar experiencias
          </button>
          <button class="quick-message-btn" data-message="Hola, vi que estás en la misma zona. ¿Podríamos compartir información sobre servicios de mantenimiento?">
            🔧 Consultar sobre mantenimiento
          </button>
          <button class="quick-message-btn" data-message="¡Hola! Tengo algunas dudas sobre aspectos legales. ¿Podrías orientarme?">
            ⚖️ Consulta legal
          </button>
        </div>
        <div class="form-group">
          <label class="form-label" for="messageText">O escribe tu propio mensaje</label>
          <textarea 
            id="messageText" 
            placeholder="Escribe aquí tu mensaje..."
            maxlength="500"
          ></textarea>
          <div class="char-counter">
            <span id="charCount">0</span>/500 caracteres
          </div>
        </div>
      </div>
      <div class="modal-actions">
        <button class="btn-cancel" id="btnCancel">Cancelar</button>
        <button class="btn-send" id="btnSend">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
            <path d="M22 2L11 13M22 2L15 22L11 13M22 2L2 9L11 13" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          Enviar
        </button>
      </div>
    </div>
  </div>

  <!-- ============================================
       PANEL DE FILTROS
  ============================================ -->
  <div class="filters-overlay" id="filtersOverlay"></div>
  <div class="filters-panel" id="filtersPanel">
    <div class="filters-handle"></div>
    <div class="filters-header">
      <h3>Filtros Avanzados</h3>
      <button class="btn-close-filters" id="btnCloseFilters">&times;</button>
    </div>
    
    <div class="filter-group">
      <div class="filter-group-header">
        <label>Distrito</label>
        <span class="filter-count" id="districtCount" style="display: none;">0</span>
      </div>
      <div class="filter-options" id="districtFilters">
        <div class="filter-option" data-district="Surco">📍 Surco</div>
        <div class="filter-option" data-district="Miraflores">📍 Miraflores</div>
        <div class="filter-option" data-district="San Isidro">📍 San Isidro</div>
        <div class="filter-option" data-district="La Molina">📍 La Molina</div>
        <div class="filter-option" data-district="Barranco">📍 Barranco</div>
        <div class="filter-option" data-district="San Borja">📍 San Borja</div>
      </div>
    </div>

    <div class="filter-group">
      <div class="filter-group-header">
        <label>Áreas de Interés</label>
        <span class="filter-count" id="interestCount" style="display: none;">0</span>
      </div>
      <div class="filter-options" id="interestFilters">
        <div class="filter-option" data-interest="Mantenimiento">🔧 Mantenimiento</div>
        <div class="filter-option" data-interest="Legal">⚖️ Legal</div>
        <div class="filter-option" data-interest="Optimización">📊 Optimización</div>
        <div class="filter-option" data-interest="Marketing">📱 Marketing</div>
        <div class="filter-option" data-interest="Finanzas">💰 Finanzas</div>
        <div class="filter-option" data-interest="Seguridad">🔒 Seguridad</div>
      </div>
    </div>

    <div class="filters-actions">
      <button class="btn-clear-filters" id="btnClearFilters">Limpiar</button>
      <button class="btn-apply-filters" id="btnApplyFilters">Aplicar Filtros</button>
    </div>
  </div>

  <!-- ============================================
       MENSAJE DE ÉXITO
  ============================================ -->
  <div class="success-message" id="successMessage">
    <div class="success-icon">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
        <path d="M20 6L9 17L4 12" stroke="white" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
    </div>
    <span>¡Mensaje enviado correctamente!</span>
  </div>

  <!-- ============================================
       JAVASCRIPT
  ============================================ -->
  <script>
    // ============================================
    // DATOS DE CONTACTOS (Simulados)
    // ============================================
    const contactsData = [
      {
        id: 1,
        name: 'Edwin R.',
        district: 'Surco',
        interests: ['Mantenimiento', 'Legal', 'Optimización'],
        properties: 3,
        responseTime: '~2h',
        verified: true,
        online: true
      },
      {
        id: 2,
        name: 'María S.',
        district: 'Miraflores',
        interests: ['Marketing', 'Finanzas'],
        properties: 5,
        responseTime: '~1h',
        verified: true,
        online: true
      },
      {
        id: 3,
        name: 'Carlos T.',
        district: 'San Isidro',
        interests: ['Legal', 'Finanzas', 'Optimización'],
        properties: 2,
        responseTime: '~4h',
        verified: true,
        online: false
      },
      {
        id: 4,
        name: 'Ana L.',
        district: 'La Molina',
        interests: ['Mantenimiento', 'Marketing'],
        properties: 4,
        responseTime: '~3h',
        verified: false,
        online: true
      },
      {
        id: 5,
        name: 'Jorge M.',
        district: 'Surco',
        interests: ['Legal', 'Marketing', 'Finanzas'],
        properties: 6,
        responseTime: '~1h',
        verified: true,
        online: false
      },
      {
        id: 6,
        name: 'Patricia V.',
        district: 'Barranco',
        interests: ['Optimización', 'Marketing', 'Seguridad'],
        properties: 3,
        responseTime: '~5h',
        verified: true,
        online: true
      },
      {
        id: 7,
        name: 'Roberto C.',
        district: 'Miraflores',
        interests: ['Mantenimiento', 'Legal', 'Seguridad'],
        properties: 4,
        responseTime: '~2h',
        verified: false,
        online: false
      },
      {
        id: 8,
        name: 'Lucía P.',
        district: 'San Isidro',
        interests: ['Finanzas', 'Optimización'],
        properties: 7,
        responseTime: '~30m',
        verified: true,
        online: true
      }
    ];

    // ============================================
    // VARIABLES GLOBALES
    // ============================================
    let filteredContacts = [...contactsData];
    let currentContactName = '';
    let activeDistrictFilters = [];
    let activeInterestFilters = [];
    let activeQuickFilter = 'todos';

    // ============================================
    // ELEMENTOS DEL DOM
    // ============================================
    const searchInput = document.getElementById('searchInput');
    const contactsList = document.getElementById('contactsList');
    const noResults = document.getElementById('noResults');
    const resultsCount = document.getElementById('resultsCount');
    const modalOverlay = document.getElementById('modalOverlay');
    const modalTitle = document.getElementById('modalTitle');
    const messageText = document.getElementById('messageText');
    const charCount = document.getElementById('charCount');
    const btnCancel = document.getElementById('btnCancel');
    const btnSend = document.getElementById('btnSend');
    const successMessage = document.getElementById('successMessage');
    const btnFilter = document.getElementById('btnFilter');
    const filterBadge = document.getElementById('filterBadge');
    const filtersPanel = document.getElementById('filtersPanel');
    const filtersOverlay = document.getElementById('filtersOverlay');
    const btnCloseFilters = document.getElementById('btnCloseFilters');
    const btnApplyFilters = document.getElementById('btnApplyFilters');
    const btnClearFilters = document.getElementById('btnClearFilters');
    const btnClearSearch = document.getElementById('btnClearSearch');
    const districtFilters = document.getElementById('districtFilters');
    const interestFilters = document.getElementById('interestFilters');
    const districtCount = document.getElementById('districtCount');
    const interestCount = document.getElementById('interestCount');

    // ============================================
    // FUNCIÓN: RENDERIZAR CONTACTOS
    // ============================================
    function renderContacts(contacts) {
      contactsList.innerHTML = '';

      if (contacts.length === 0) {
        noResults.classList.add('visible');
        resultsCount.textContent = '0 personas';
        return;
      }

      noResults.classList.remove('visible');
      resultsCount.textContent = `${contacts.length} ${contacts.length === 1 ? 'persona' : 'personas'}`;

      contacts.forEach(contact => {
        const card = document.createElement('article');
        card.className = 'contact-card';
        card.setAttribute('data-district', contact.district);
        card.setAttribute('data-interests', contact.interests.join(','));

        const interestsTags = contact.interests
          .map(interest => {
            const icons = {
              'Mantenimiento': '🔧',
              'Legal': '⚖️',
              'Optimización': '📊',
              'Marketing': '📱',
              'Finanzas': '💰',
              'Seguridad': '🔒'
            };
            return `<span class="interest-tag">${icons[interest] || '•'} ${interest}</span>`;
          })
          .join('');

        const verifiedBadge = contact.verified ? `
          <div class="verified-badge">
            <svg width="10" height="10" viewBox="0 0 24 24" fill="none">
              <path d="M20 6L9 17L4 12" stroke="white" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </div>
        ` : '';

        const onlineBadge = contact.online ? '<div class="avatar-badge"></div>' : '';

        card.innerHTML = `
          <div class="contact-header">
            <div class="contact-avatar">
              <svg width="36" height="36" viewBox="0 0 24 24" fill="none">
                <path d="M20 21V19C20 17.9391 19.5786 16.9217 18.8284 16.1716C18.0783 15.4214 17.0609 15 16 15H8C6.93913 15 5.92172 15.4214 5.17157 16.1716C4.42143 16.9217 4 17.9391 4 19V21" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                <circle cx="12" cy="7" r="4" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
              ${onlineBadge}
            </div>
            <div class="contact-info">
              <h4 class="contact-name">
                ${contact.name}
                ${verifiedBadge}
              </h4>
              <p class="contact-location">📍 Propietario en ${contact.district}</p>
              <div class="contact-meta">
                <span class="meta-item">
                  <svg width="14" height="14" viewBox="0 0 24 24" fill="none">
                    <path d="M3 9L12 2L21 9V20C21 20.5304 20.7893 21.0391 20.4142 21.4142C20.0391 21.7893 19.5304 22 19 22H5C4.46957 22 3.96086 21.7893 3.58579 21.4142C3.21071 21.0391 3 20.5304 3 20V9Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                  ${contact.properties} prop.
                </span>
                <span class="meta-item">
                  <svg width="14" height="14" viewBox="0 0 24 24" fill="none">
                    <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
                    <path d="M12 6V12L16 14" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                  </svg>
                  ${contact.responseTime}
                </span>
              </div>
            </div>
          </div>
          <div class="interests">
            ${interestsTags}
          </div>
          <div class="contact-actions">
            <button class="btn-contact" data-name="${contact.name}">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
                <path d="M21 15C21 15.5304 20.7893 16.0391 20.4142 16.4142C20.0391 16.7893 19.5304 17 19 17H7L3 21V5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H19C19.5304 3 20.0391 3.21071 20.4142 3.58579C20.7893 3.96086 21 4.46957 21 5V15Z" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
              Contactar
            </button>
            <button class="btn-view-profile" data-name="${contact.name}">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
                <circle cx="12" cy="12" r="3" stroke="currentColor" stroke-width="2"/>
                <path d="M12 5C8.24261 5 5.43602 7.44125 3.76737 9.43966C2.85009 10.5417 2.39145 11.0928 2.39145 12C2.39145 12.9072 2.85009 13.4583 3.76737 14.5603C5.43602 16.5587 8.24261 19 12 19C15.7574 19 18.564 16.5587 20.2326 14.5603C21.1499 13.4583 21.6085 12.9072 21.6085 12C21.6085 11.0928 21.1499 10.5417 20.2326 9.43966C18.564 7.44125 15.7574 5 12 5Z" stroke="currentColor" stroke-width="2"/>
              </svg>
            </button>
          </div>
        `;

        contactsList.appendChild(card);
      });

      // Event listeners para botones de contactar
      const btnContacts = document.querySelectorAll('.btn-contact');
      btnContacts.forEach(btn => {
        btn.addEventListener('click', (e) => {
          currentContactName = e.target.closest('.btn-contact').getAttribute('data-name');
          openModal();
        });
      });

      // Event listeners para ver perfil
      const btnProfiles = document.querySelectorAll('.btn-view-profile');
      btnProfiles.forEach(btn => {
        btn.addEventListener('click', () => {
          alert('Función de ver perfil completo próximamente');
        });
      });
    }

    // ============================================
    // FUNCIÓN: FILTRAR CONTACTOS
    // ============================================
    function filterContacts() {
      const searchTerm = searchInput.value.toLowerCase().trim();
      
      filteredContacts = contactsData.filter(contact => {
        // Filtro de búsqueda
        const matchesSearch = 
          contact.name.toLowerCase().includes(searchTerm) ||
          contact.district.toLowerCase().includes(searchTerm) ||
          contact.interests.some(i => i.toLowerCase().includes(searchTerm));

        // Filtro de distrito
        const matchesDistrict = 
          activeDistrictFilters.length === 0 || 
          activeDistrictFilters.includes(contact.district);

        // Filtro de intereses
        const matchesInterest = 
          activeInterestFilters.length === 0 ||
          activeInterestFilters.some(interest => contact.interests.includes(interest));

        // Filtros rápidos
        let matchesQuickFilter = true;
        if (activeQuickFilter === 'verificados') {
          matchesQuickFilter = contact.verified;
        } else if (activeQuickFilter === 'activos') {
          matchesQuickFilter = contact.online;
        } else if (activeQuickFilter === 'nuevos') {
          matchesQuickFilter = contact.id >= 6; // Los últimos 3
        }

        return matchesSearch && matchesDistrict && matchesInterest && matchesQuickFilter;
      });

      renderContacts(filteredContacts);
      updateFilterBadge();
    }

    // ============================================
    // FUNCIÓN: ACTUALIZAR BADGE DE FILTROS
    // ============================================
    function updateFilterBadge() {
      const totalFilters = activeDistrictFilters.length + activeInterestFilters.length;
      filterBadge.textContent = totalFilters;
      
      if (totalFilters > 0) {
        filterBadge.classList.add('active');
        btnFilter.classList.add('active');
      } else {
        filterBadge.classList.remove('active');
        if (!filtersPanel.classList.contains('active')) {
          btnFilter.classList.remove('active');
        }
      }

      // Actualizar contadores en el panel
      if (activeDistrictFilters.length > 0) {
        districtCount.style.display = 'block';
        districtCount.textContent = activeDistrictFilters.length;
      } else {
        districtCount.style.display = 'none';
      }

      if (activeInterestFilters.length > 0) {
        interestCount.style.display = 'block';
        interestCount.textContent = activeInterestFilters.length;
      } else {
        interestCount.style.display = 'none';
      }
    }

    // ============================================
    // FUNCIÓN: ABRIR MODAL
    // ============================================
    function openModal() {
      modalTitle.textContent = `Enviar mensaje a ${currentContactName}`;
      messageText.value = '';
      charCount.textContent = '0';
      modalOverlay.classList.add('active');
      document.body.style.overflow = 'hidden';
    }

    // ============================================
    // FUNCIÓN: CERRAR MODAL
    // ============================================
    function closeModal() {
      modalOverlay.classList.remove('active');
      document.body.style.overflow = 'auto';
    }

    // ============================================
    // FUNCIÓN: ENVIAR MENSAJE
    // ============================================
    function sendMessage() {
      const message = messageText.value.trim();
      
      if (message === '') {
        messageText.style.borderColor = var(--naranja-principal);
        messageText.focus();
        setTimeout(() => {
          messageText.style.borderColor = '';
        }, 2000);
        return;
      }

      closeModal();

      successMessage.classList.add('show');
      
      setTimeout(() => {
        successMessage.classList.remove('show');
      }, 3500);

      messageText.value = '';
      charCount.textContent = '0';
    }

    // ============================================
    // FUNCIÓN: ABRIR/CERRAR PANEL DE FILTROS
    // ============================================
    function openFiltersPanel() {
      filtersPanel.classList.add('active');
      filtersOverlay.classList.add('active');
      btnFilter.classList.add('active');
      document.body.style.overflow = 'hidden';
    }

    function closeFiltersPanel() {
      filtersPanel.classList.remove('active');
      filtersOverlay.classList.remove('active');
      if (activeDistrictFilters.length === 0 && activeInterestFilters.length === 0) {
        btnFilter.classList.remove('active');
      }
      document.body.style.overflow = 'auto';
    }

    // ============================================
    // FUNCIÓN: APLICAR FILTROS
    // ============================================
    function applyFilters() {
      filterContacts();
      closeFiltersPanel();
    }

    // ============================================
    // FUNCIÓN: LIMPIAR FILTROS
    // ============================================
    function clearAllFilters() {
      activeDistrictFilters = [];
      activeInterestFilters = [];
      
      document.querySelectorAll('.filter-option.active').forEach(option => {
        option.classList.remove('active');
      });
      
      updateFilterBadge();
      filterContacts();
    }

    // ============================================
    // FUNCIÓN: LIMPIAR BÚSQUEDA
    // ============================================
    function clearSearch() {
      searchInput.value = '';
      activeQuickFilter = 'todos';
      document.querySelectorAll('.quick-filter-btn').forEach(btn => {
        btn.classList.remove('active');
        if (btn.getAttribute('data-quick') === 'todos') {
          btn.classList.add('active');
        }
      });
      clearAllFilters();
    }

    // ============================================
    // EVENT LISTENERS
    // ============================================

    // Búsqueda en tiempo real
    searchInput.addEventListener('input', filterContacts);

    // Contador de caracteres
    messageText.addEventListener('input', () => {
      charCount.textContent = messageText.value.length;
    });

    // Botón de filtros
    btnFilter.addEventListener('click', openFiltersPanel);
    btnCloseFilters.addEventListener('click', closeFiltersPanel);
    btnApplyFilters.addEventListener('click', applyFilters);
    btnClearFilters.addEventListener('click', clearAllFilters);
    btnClearSearch.addEventListener('click', clearSearch);

    // Overlay de filtros
    filtersOverlay.addEventListener('click', closeFiltersPanel);

    // Filtros rápidos
    document.querySelectorAll('.quick-filter-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        document.querySelectorAll('.quick-filter-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        activeQuickFilter = btn.getAttribute('data-quick');
        filterContacts();
      });
    });

    // Filtros de distrito
    districtFilters.addEventListener('click', (e) => {
      if (e.target.classList.contains('filter-option')) {
        const district = e.target.getAttribute('data-district');
        e.target.classList.toggle('active');
        
        if (activeDistrictFilters.includes(district)) {
          activeDistrictFilters = activeDistrictFilters.filter(d => d !== district);
        } else {
          activeDistrictFilters.push(district);
        }
        
        updateFilterBadge();
      }
    });

    // Filtros de intereses
    interestFilters.addEventListener('click', (e) => {
      if (e.target.classList.contains('filter-option')) {
        const interest = e.target.getAttribute('data-interest');
        e.target.classList.toggle('active');
        
        if (activeInterestFilters.includes(interest)) {
          activeInterestFilters = activeInterestFilters.filter(i => i !== interest);
        } else {
          activeInterestFilters.push(interest);
        }
        
        updateFilterBadge();
      }
    });

    // Mensajes rápidos en el modal
    document.querySelectorAll('.quick-message-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        messageText.value = btn.getAttribute('data-message');
        charCount.textContent = messageText.value.length;
        messageText.focus();
      });
    });

    // Modal - Botón cancelar
    btnCancel.addEventListener('click', closeModal);

    // Modal - Botón enviar
    btnSend.addEventListener('click', sendMessage);

    // Cerrar modal al hacer clic fuera del contenido
    modalOverlay.addEventListener('click', (e) => {
      if (e.target === modalOverlay) {
        closeModal();
      }
    });

    // Botón volver
    document.querySelector('.btn-back').addEventListener('click', () => {
      // Simulación de navegación
      if (confirm('¿Deseas volver al Dashboard?')) {
        alert('Redirigiendo al Dashboard...');
      }
    });

    // Limpiar estilo de error del textarea
    messageText.addEventListener('focus', () => {
      messageText.style.borderColor = '';
    });

    // Prevenir scroll del body cuando los paneles están abiertos
    let touchStartY = 0;
    
    filtersPanel.addEventListener('touchstart', (e) => {
      touchStartY = e.touches[0].clientY;
    });

    filtersPanel.addEventListener('touchmove', (e) => {
      const touchY = e.touches[0].clientY;
      const isScrollingDown = touchY < touchStartY;
      const isAtTop = filtersPanel.scrollTop === 0;
      
      if (isAtTop && !isScrollingDown) {
        e.preventDefault();
      }
    }, { passive: false });

    // ============================================
    // FUNCIONES DE ANIMACIÓN
    // ============================================
    
    // Animación suave al cargar
    window.addEventListener('load', () => {
      document.body.style.opacity = '0';
      setTimeout(() => {
        document.body.style.transition = 'opacity 0.3s ease';
        document.body.style.opacity = '1';
      }, 50);
    });

    // Efecto parallax suave en el scroll
    let lastScrollTop = 0;
    const header = document.querySelector('header');
    
    window.addEventListener('scroll', () => {
      const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
      
      if (scrollTop > lastScrollTop && scrollTop > 100) {
        // Scrolling down
        header.style.transform = 'translateX(-50%) translateY(-10px)';
        header.style.opacity = '0.95';
      } else {
        // Scrolling up
        header.style.transform = 'translateX(-50%) translateY(0)';
        header.style.opacity = '1';
      }
      
      lastScrollTop = scrollTop <= 0 ? 0 : scrollTop;
    }, { passive: true });

    // ============================================
    // GESTOS TÁCTILES PARA CERRAR PANEL
    // ============================================
    let touchStartYPanel = 0;
    let isDragging = false;

    filtersPanel.addEventListener('touchstart', (e) => {
      if (e.target.classList.contains('filters-handle') || 
          e.target.classList.contains('filters-header')) {
        touchStartYPanel = e.touches[0].clientY;
        isDragging = true;
      }
    });

    filtersPanel.addEventListener('touchmove', (e) => {
      if (!isDragging) return;
      
      const touchY = e.touches[0].clientY;
      const deltaY = touchY - touchStartYPanel;
      
      if (deltaY > 0) {
        filtersPanel.style.transform = `translateX(-50%) translateY(${deltaY}px)`;
      }
    });

    filtersPanel.addEventListener('touchend', (e) => {
      if (!isDragging) return;
      
      const touchY = e.changedTouches[0].clientY;
      const deltaY = touchY - touchStartYPanel;
      
      if (deltaY > 100) {
        closeFiltersPanel();
      }
      
      filtersPanel.style.transform = 'translateX(-50%) translateY(0)';
      isDragging = false;
    });

    // ============================================
    // SIMULACIÓN DE ACTUALIZACIONES EN TIEMPO REAL
    // ============================================
    
    // Simular cambios en estadísticas cada 30 segundos
    setInterval(() => {
      const statNumbers = document.querySelectorAll('.stat-number');
      statNumbers.forEach((stat, index) => {
        if (index === 1) { // Solo actualizar "En línea"
          const currentValue = parseInt(stat.textContent);
          const change = Math.floor(Math.random() * 5) - 2; // -2 a +2
          const newValue = Math.max(80, Math.min(95, currentValue + change));
          
          // Animación de cambio
          stat.style.transform = 'scale(1.1)';
          stat.style.color = change > 0 ? '#93C47D' : change < 0 ? '#FF7B54' : 'white';
          
          setTimeout(() => {
            stat.textContent = newValue;
            setTimeout(() => {
              stat.style.transform = 'scale(1)';
              stat.style.color = 'white';
            }, 200);
          }, 150);
        }
      });
    }, 30000);

    // ============================================
    // NOTIFICACIONES SIMULADAS
    // ============================================
    
    // Simular notificación de nuevo miembro cada 2 minutos
    setInterval(() => {
      const notification = document.createElement('div');
      notification.style.cssText = `
        position: fixed;
        top: 160px;
        left: 50%;
        transform: translateX(-50%) translateY(-100px);
        background: white;
        padding: 12px 20px;
        border-radius: 12px;
        box-shadow: 0 4px 16px rgba(0, 0, 0, 0.15);
        z-index: 999;
        font-size: 13px;
        color: #333;
        opacity: 0;
        transition: all 0.4s ease;
        max-width: 90%;
        display: flex;
        align-items: center;
        gap: 10px;
        border-left: 4px solid #93C47D;
      `;
      
      notification.innerHTML = `
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
          <path d="M17 21V19C17 17.9391 16.5786 16.9217 15.8284 16.1716C15.0783 15.4214 14.0609 15 13 15H5C3.93913 15 2.92172 15.4214 2.17157 16.1716C1.42143 16.9217 1 17.9391 1 19V21" stroke="#93C47D" stroke-width="2" stroke-linecap="round"/>
          <circle cx="9" cy="7" r="4" stroke="#93C47D" stroke-width="2"/>
          <path d="M23 21V19C22.9993 18.1137 22.7044 17.2528 22.1614 16.5523C21.6184 15.8519 20.8581 15.3516 20 15.13" stroke="#93C47D" stroke-width="2" stroke-linecap="round"/>
          <path d="M16 3.13C16.8604 3.35031 17.623 3.85071 18.1676 4.55232C18.7122 5.25392 19.0078 6.11683 19.0078 7.005C19.0078 7.89317 18.7122 8.75608 18.1676 9.45768C17.623 10.1593 16.8604 10.6597 16 10.88" stroke="#93C47D" stroke-width="2" stroke-linecap="round"/>
        </svg>
        <span><strong>Nuevo miembro</strong> se unió a la comunidad</span>
      `;
      
      document.body.appendChild(notification);
      
      setTimeout(() => {
        notification.style.transform = 'translateX(-50%) translateY(0)';
        notification.style.opacity = '1';
      }, 100);
      
      setTimeout(() => {
        notification.style.transform = 'translateX(-50%) translateY(-100px)';
        notification.style.opacity = '0';
        setTimeout(() => notification.remove(), 400);
      }, 4000);
    }, 120000); // Cada 2 minutos

    // ============================================
    // INDICADOR DE CONECTIVIDAD
    // ============================================
    
    window.addEventListener('online', () => {
      const connectivity = document.createElement('div');
      connectivity.style.cssText = `
        position: fixed;
        bottom: 20px;
        left: 50%;
        transform: translateX(-50%);
        background: linear-gradient(135deg, #93C47D 0%, #6B8E23 100%);
        color: white;
        padding: 12px 24px;
        border-radius: 12px;
        font-size: 13px;
        font-weight: 600;
        box-shadow: 0 4px 16px rgba(147, 196, 125, 0.4);
        z-index: 2000;
      `;
      connectivity.textContent = '✓ Conectado';
      document.body.appendChild(connectivity);
      
      setTimeout(() => connectivity.remove(), 3000);
    });

    window.addEventListener('offline', () => {
      const connectivity = document.createElement('div');
      connectivity.style.cssText = `
        position: fixed;
        bottom: 20px;
        left: 50%;
        transform: translateX(-50%);
        background: linear-gradient(135deg, #FF7B54 0%, #E66B44 100%);
        color: white;
        padding: 12px 24px;
        border-radius: 12px;
        font-size: 13px;
        font-weight: 600;
        box-shadow: 0 4px 16px rgba(255, 123, 84, 0.4);
        z-index: 2000;
      `;
      connectivity.textContent = '⚠ Sin conexión';
      document.body.appendChild(connectivity);
    });

    // ============================================
    // INICIALIZACIÓN
    // ============================================
    
    // Renderizar contactos iniciales
    renderContacts(contactsData);
    
    // Mostrar mensaje de bienvenida
    setTimeout(() => {
      const welcome = document.createElement('div');
      welcome.style.cssText = `
        position: fixed;
        top: 160px;
        left: 50%;
        transform: translateX(-50%);
        background: linear-gradient(135deg, #FF7B54 0%, #FFB26B 100%);
        color: white;
        padding: 14px 24px;
        border-radius: 14px;
        font-size: 14px;
        font-weight: 600;
        box-shadow: 0 4px 16px rgba(255, 123, 84, 0.3);
        z-index: 998;
        opacity: 0;
        transition: all 0.4s ease;
        max-width: 90%;
        text-align: center;
      `;
      welcome.textContent = '¡Bienvenido a la Comunidad! 👋';
      document.body.appendChild(welcome);
      
      setTimeout(() => {
        welcome.style.opacity = '1';
      }, 500);
      
      setTimeout(() => {
        welcome.style.opacity = '0';
        setTimeout(() => welcome.remove(), 400);
      }, 3500);
    }, 1000);

    // Aplicar transiciones suaves a las tarjetas al aparecer
    setTimeout(() => {
      const cards = document.querySelectorAll('.contact-card');
      cards.forEach((card, index) => {
        card.style.opacity = '0';
        card.style.transform = 'translateY(20px)';
        
        setTimeout(() => {
          card.style.transition = 'all 0.4s ease';
          card.style.opacity = '1';
          card.style.transform = 'translateY(0)';
        }, index * 50);
      });
    }, 500);

    // Efecto de pulsación en estadísticas
    document.querySelectorAll('.stat-card').forEach(card => {
      card.addEventListener('click', () => {
        card.style.transform = 'scale(0.95)';
        setTimeout(() => {
          card.style.transform = 'scale(1)';
        }, 150);
      });
    });

    // Log de inicialización
    console.log('%c🏠 PrediRent - Comunidad de Propietarios', 'color: #FF7B54; font-size: 16px; font-weight: bold;');
    console.log('%cVista cargada correctamente ✓', 'color: #93C47D; font-size: 12px;');
    console.log(`%c${contactsData.length} propietarios disponibles`, 'color: #777; font-size: 12px;');
  </script>
</body>
</html>
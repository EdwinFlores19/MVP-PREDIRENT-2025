<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PrediRent - Generar Reportes</title>
  <style>
    /* Variables de Color */
    :root {
      --naranja-principal: #FF7B54;
      --naranja-claro: #FFB26B;
      --verde-confirmacion: #93C47D;
      --verde-oscuro: #6B8E23;
      --fondo-claro: #F9F9F9;
      --texto-principal: #333333;
      --texto-secundario: #777777;
      --borde-suave: #E0E0E0;
    }

    /* Reset y Estilos Base */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      background-color: var(--fondo-claro);
      color: var(--texto-principal);
      max-width: 480px;
      margin: 0 auto;
      padding-bottom: 100px;
    }

    /* Header Fijo */
    header {
      position: fixed;
      top: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 100%;
      max-width: 480px;
      background-color: white;
      padding: 16px 20px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
      display: flex;
      align-items: center;
      gap: 16px;
      z-index: 1000;
    }

    .back-button {
      background: none;
      border: none;
      cursor: pointer;
      padding: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: transform 0.2s;
    }

    .back-button:active {
      transform: scale(0.95);
    }

    header h2 {
      font-size: 20px;
      font-weight: 600;
      color: var(--texto-principal);
    }

    /* Contenido Principal */
    main {
      margin-top: 70px;
      padding: 0 20px;
    }

    /* Sección de Configuración */
    .report-config {
      background: white;
      border-radius: 12px;
      padding: 24px 20px;
      margin-bottom: 20px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
    }

    .config-step {
      margin-bottom: 32px;
    }

    .config-step:last-child {
      margin-bottom: 0;
    }

    .config-step h3 {
      font-size: 16px;
      font-weight: 600;
      color: var(--texto-principal);
      margin-bottom: 16px;
    }

    /* Lista de Propiedades */
    .property-list {
      list-style: none;
    }

    .property-item {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 16px;
      border: 2px solid var(--borde-suave);
      border-radius: 10px;
      margin-bottom: 12px;
      transition: all 0.3s;
    }

    .property-item.selected {
      border-color: var(--naranja-principal);
      background-color: rgba(255, 123, 84, 0.05);
    }

    .property-info {
      display: flex;
      align-items: center;
      gap: 12px;
      flex: 1;
    }

    .property-icon {
      width: 40px;
      height: 40px;
      background-color: var(--naranja-claro);
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
    }

    .property-name {
      font-size: 14px;
      font-weight: 500;
      color: var(--texto-principal);
    }

    /* Checkbox personalizado */
    .custom-checkbox {
      width: 24px;
      height: 24px;
      border: 2px solid var(--borde-suave);
      border-radius: 6px;
      cursor: pointer;
      transition: all 0.3s;
      flex-shrink: 0;
    }

    .custom-checkbox.checked {
      background-color: var(--naranja-principal);
      border-color: var(--naranja-principal);
    }

    /* Selector de Período */
    .period-selector {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
    }

    .select-wrapper {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .select-wrapper label {
      font-size: 13px;
      font-weight: 500;
      color: var(--texto-secundario);
    }

    select {
      width: 100%;
      padding: 14px 12px;
      border: 2px solid var(--borde-suave);
      border-radius: 10px;
      font-size: 15px;
      color: var(--texto-principal);
      background-color: white;
      cursor: pointer;
      transition: border-color 0.3s;
    }

    select:focus {
      outline: none;
      border-color: var(--naranja-principal);
    }

    /* Opciones de Contenido */
    .content-options {
      list-style: none;
    }

    .content-item {
      display: flex;
      align-items: flex-start;
      gap: 12px;
      padding: 14px 0;
      cursor: pointer;
      user-select: none;
    }

    .content-item:not(:last-child) {
      border-bottom: 1px solid var(--borde-suave);
    }

    .content-item label {
      font-size: 14px;
      color: var(--texto-principal);
      cursor: pointer;
      flex: 1;
      line-height: 1.5;
    }

    /* Botón CTA Fijo */
    .cta-container {
      position: fixed;
      bottom: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 100%;
      max-width: 480px;
      padding: 16px 20px;
      background: linear-gradient(to top, white 80%, transparent);
      z-index: 999;
    }

    .cta-button {
      width: 100%;
      padding: 16px;
      background-color: var(--naranja-principal);
      color: white;
      border: none;
      border-radius: 12px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
      box-shadow: 0 4px 12px rgba(255, 123, 84, 0.3);
    }

    .cta-button:active {
      transform: scale(0.98);
      box-shadow: 0 2px 8px rgba(255, 123, 84, 0.3);
    }

    .cta-button:disabled {
      background-color: var(--borde-suave);
      color: var(--texto-secundario);
      cursor: not-allowed;
      box-shadow: none;
    }

    .cta-button.loading {
      position: relative;
      color: transparent;
    }

    .cta-button.loading::after {
      content: '';
      position: absolute;
      width: 20px;
      height: 20px;
      top: 50%;
      left: 50%;
      margin-left: -10px;
      margin-top: -10px;
      border: 3px solid white;
      border-radius: 50%;
      border-top-color: transparent;
      animation: spin 0.8s linear infinite;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    /* Modal de Éxito */
    .success-modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.5);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 2000;
      padding: 20px;
      opacity: 0;
      transition: opacity 0.3s;
    }

    .success-modal.show {
      display: flex;
      opacity: 1;
    }

    .success-content {
      background: white;
      border-radius: 16px;
      padding: 32px 24px;
      text-align: center;
      max-width: 320px;
      width: 100%;
      transform: scale(0.9);
      transition: transform 0.3s;
    }

    .success-modal.show .success-content {
      transform: scale(1);
    }

    .success-icon {
      width: 64px;
      height: 64px;
      margin: 0 auto 20px;
      background-color: var(--verde-confirmacion);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .success-title {
      font-size: 20px;
      font-weight: 600;
      color: var(--texto-principal);
      margin-bottom: 12px;
    }

    .success-message {
      font-size: 14px;
      color: var(--texto-secundario);
      margin-bottom: 24px;
    }

    .download-button {
      width: 100%;
      padding: 14px;
      background-color: var(--verde-confirmacion);
      color: white;
      border: none;
      border-radius: 10px;
      font-size: 15px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
    }

    .download-button:active {
      transform: scale(0.98);
    }

    /* Historial de Reportes */
    .report-history {
      background: white;
      border-radius: 12px;
      padding: 24px 20px;
      margin-bottom: 20px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
    }

    .report-history h3 {
      font-size: 18px;
      font-weight: 600;
      color: var(--texto-principal);
      margin-bottom: 16px;
    }

    .history-list {
      list-style: none;
    }

    .history-item {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 14px 0;
      border-bottom: 1px solid var(--borde-suave);
    }

    .history-item:last-child {
      border-bottom: none;
    }

    .pdf-icon {
      width: 40px;
      height: 40px;
      background-color: rgba(255, 123, 84, 0.1);
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
    }

    .history-info {
      flex: 1;
    }

    .history-title {
      font-size: 14px;
      font-weight: 500;
      color: var(--texto-principal);
      margin-bottom: 4px;
    }

    .history-date {
      font-size: 12px;
      color: var(--texto-secundario);
    }

    .download-btn {
      padding: 8px 16px;
      background-color: var(--fondo-claro);
      color: var(--naranja-principal);
      border: 1px solid var(--naranja-principal);
      border-radius: 8px;
      font-size: 13px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
      flex-shrink: 0;
    }

    .download-btn:active {
      background-color: var(--naranja-principal);
      color: white;
    }

    .view-all {
      display: block;
      text-align: center;
      color: var(--naranja-principal);
      font-size: 14px;
      font-weight: 600;
      margin-top: 16px;
      text-decoration: none;
      padding: 8px;
    }

    /* Animaciones de Fade In */
    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .fade-in {
      animation: fadeIn 0.4s ease-out;
    }
  </style>
</head>
<body>
  <!-- Header Fijo -->
  <header>
    <button class="back-button" aria-label="Volver">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M19 12H5M12 19l-7-7 7-7"/>
      </svg>
    </button>
    <h2>Generar Reportes</h2>
  </header>

  <!-- Contenido Principal -->
  <main>
    <!-- Sección de Configuración del Reporte -->
    <section class="report-config fade-in">
      <!-- Paso 1: Seleccionar Propiedades -->
      <div class="config-step">
        <h3>1. Selecciona la propiedad</h3>
        <ul class="property-list" id="propertyList">
          <li class="property-item" data-property="miraflores">
            <div class="property-info">
              <div class="property-icon">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
                  <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/>
                  <polyline points="9 22 9 12 15 12 15 22"/>
                </svg>
              </div>
              <span class="property-name">Apartamento en Miraflores</span>
            </div>
            <div class="custom-checkbox"></div>
          </li>
          <li class="property-item" data-property="sanisidro">
            <div class="property-info">
              <div class="property-icon">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
                  <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/>
                  <polyline points="9 22 9 12 15 12 15 22"/>
                </svg>
              </div>
              <span class="property-name">Casa en San Isidro</span>
            </div>
            <div class="custom-checkbox"></div>
          </li>
          <li class="property-item" data-property="barranco">
            <div class="property-info">
              <div class="property-icon">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
                  <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/>
                  <polyline points="9 22 9 12 15 12 15 22"/>
                </svg>
              </div>
              <span class="property-name">Departamento en Barranco</span>
            </div>
            <div class="custom-checkbox"></div>
          </li>
        </ul>
      </div>

      <!-- Paso 2: Seleccionar Período -->
      <div class="config-step">
        <h3>2. Elige el período</h3>
        <div class="period-selector">
          <div class="select-wrapper">
            <label for="monthSelect">Mes</label>
            <select id="monthSelect">
              <option value="1">Enero</option>
              <option value="2">Febrero</option>
              <option value="3">Marzo</option>
              <option value="4">Abril</option>
              <option value="5">Mayo</option>
              <option value="6">Junio</option>
              <option value="7">Julio</option>
              <option value="8">Agosto</option>
              <option value="9" selected>Septiembre</option>
              <option value="10">Octubre</option>
              <option value="11">Noviembre</option>
              <option value="12">Diciembre</option>
            </select>
          </div>
          <div class="select-wrapper">
            <label for="yearSelect">Año</label>
            <select id="yearSelect">
              <option value="2021">2021</option>
              <option value="2022">2022</option>
              <option value="2023">2023</option>
              <option value="2024">2024</option>
              <option value="2025" selected>2025</option>
            </select>
          </div>
        </div>
      </div>

      <!-- Paso 3: Personalizar Contenido -->
      <div class="config-step">
        <h3>3. ¿Qué deseas incluir?</h3>
        <ul class="content-options" id="contentOptions">
          <li class="content-item" data-content="financiero">
            <div class="custom-checkbox"></div>
            <label>Resumen Financiero (Ingresos y gastos)</label>
          </li>
          <li class="content-item" data-content="ocupacion">
            <div class="custom-checkbox"></div>
            <label>Estado de Ocupación (Días alquilado vs. vacante)</label>
          </li>
          <li class="content-item" data-content="regulaciones">
            <div class="custom-checkbox"></div>
            <label>Actualizaciones de Regulaciones Gubernamentales para la zona</label>
          </li>
          <li class="content-item" data-content="mantenimiento">
            <div class="custom-checkbox"></div>
            <label>Historial de Mantenimiento</label>
          </li>
        </ul>
      </div>
    </section>

    <!-- Historial de Reportes -->
    <section class="report-history fade-in">
      <h3>Reportes Anteriores</h3>
      <ul class="history-list">
        <li class="history-item">
          <div class="pdf-icon">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#FF7B54" stroke-width="2">
              <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
              <polyline points="14 2 14 8 20 8"/>
              <line x1="16" y1="13" x2="8" y2="13"/>
              <line x1="16" y1="17" x2="8" y2="17"/>
            </svg>
          </div>
          <div class="history-info">
            <div class="history-title">Reporte Financiero - Sep 2025</div>
            <div class="history-date">Generado: 30 Sep 2025</div>
          </div>
          <button class="download-btn">Descargar</button>
        </li>
        <li class="history-item">
          <div class="pdf-icon">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#FF7B54" stroke-width="2">
              <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
              <polyline points="14 2 14 8 20 8"/>
              <line x1="16" y1="13" x2="8" y2="13"/>
              <line x1="16" y1="17" x2="8" y2="17"/>
            </svg>
          </div>
          <div class="history-info">
            <div class="history-title">Reporte Completo - Ago 2025</div>
            <div class="history-date">Generado: 31 Ago 2025</div>
          </div>
          <button class="download-btn">Descargar</button>
        </li>
        <li class="history-item">
          <div class="pdf-icon">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#FF7B54" stroke-width="2">
              <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
              <polyline points="14 2 14 8 20 8"/>
              <line x1="16" y1="13" x2="8" y2="13"/>
              <line x1="16" y1="17" x2="8" y2="17"/>
            </svg>
          </div>
          <div class="history-info">
            <div class="history-title">Reporte de Ocupación - Jul 2025</div>
            <div class="history-date">Generado: 31 Jul 2025</div>
          </div>
          <button class="download-btn">Descargar</button>
        </li>
      </ul>
      <a href="#" class="view-all">Ver todos los reportes</a>
    </section>
  </main>

  <!-- Botón CTA Fijo -->
  <div class="cta-container">
    <button class="cta-button" id="generateBtn">Generar Reporte PDF</button>
  </div>

  <!-- Modal de Éxito -->
  <div class="success-modal" id="successModal">
    <div class="success-content">
      <div class="success-icon">
        <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="3">
          <polyline points="20 6 9 17 4 12"/>
        </svg>
      </div>
      <h4 class="success-title">¡Tu reporte está listo!</h4>
      <p class="success-message">El documento PDF ha sido generado exitosamente y está listo para descargar.</p>
      <button class="download-button" id="downloadBtn">Descargar Ahora</button>
    </div>
  </div>

  <script>
    // Estado de la aplicación
    const state = {
      selectedProperties: [],
      selectedContent: [],
      month: 9,
      year: 2025
    };

    // Elementos del DOM
    const propertyList = document.getElementById('propertyList');
    const contentOptions = document.getElementById('contentOptions');
    const generateBtn = document.getElementById('generateBtn');
    const successModal = document.getElementById('successModal');
    const downloadBtn = document.getElementById('downloadBtn');
    const backButton = document.querySelector('.back-button');
    const monthSelect = document.getElementById('monthSelect');
    const yearSelect = document.getElementById('yearSelect');

    // Función para manejar la selección de propiedades
    function toggleProperty(propertyItem) {
      const propertyId = propertyItem.dataset.property;
      const checkbox = propertyItem.querySelector('.custom-checkbox');
      
      if (state.selectedProperties.includes(propertyId)) {
        state.selectedProperties = state.selectedProperties.filter(id => id !== propertyId);
        propertyItem.classList.remove('selected');
        checkbox.classList.remove('checked');
      } else {
        state.selectedProperties.push(propertyId);
        propertyItem.classList.add('selected');
        checkbox.classList.add('checked');
      }
      
      updateGenerateButton();
    }

    // Función para manejar la selección de contenido
    function toggleContent(contentItem) {
      const contentId = contentItem.dataset.content;
      const checkbox = contentItem.querySelector('.custom-checkbox');
      
      if (state.selectedContent.includes(contentId)) {
        state.selectedContent = state.selectedContent.filter(id => id !== contentId);
        checkbox.classList.remove('checked');
      } else {
        state.selectedContent.push(contentId);
        checkbox.classList.add('checked');
      }
      
      updateGenerateButton();
    }

    // Función para actualizar el estado del botón de generar
    function updateGenerateButton() {
      if (state.selectedProperties.length > 0 && state.selectedContent.length > 0) {
        generateBtn.disabled = false;
      } else {
        generateBtn.disabled = true;
      }
    }

    // Función para generar el reporte
    function generateReport() {
      generateBtn.classList.add('loading');
      generateBtn.disabled = true;
      
      // Simular el proceso de generación del reporte
      setTimeout(() => {
        generateBtn.classList.remove('loading');
        showSuccessModal();
      }, 2000);
    }

    // Función para mostrar el modal de éxito
    function showSuccessModal() {
      successModal.classList.add('show');
    }

    // Función para cerrar el modal y simular descarga
    function downloadReport() {
      const months = ['Ene', 'Feb', 'Mar', 'Abr', 'May', 'Jun', 'Jul', 'Ago', 'Sep', 'Oct', 'Nov', 'Dic'];
      const monthName = months[state.month - 1];
      
      console.log(`Descargando reporte: Reporte_${monthName}_${state.year}.pdf`);
      console.log('Propiedades:', state.selectedProperties);
      console.log('Contenido:', state.selectedContent);
      
      successModal.classList.remove('show');
      
      // Resetear el formulario
      state.selectedProperties = [];
      state.selectedContent = [];
      
      document.querySelectorAll('.property-item').forEach(item => {
        item.classList.remove('selected');
        item.querySelector('.custom-checkbox').classList.remove('checked');
      });
      
      document.querySelectorAll('.content-item .custom-checkbox').forEach(checkbox => {
        checkbox.classList.remove('checked');
      });
      
      updateGenerateButton();
    }

    // Función para manejar el botón de volver
    function goBack() {
      console.log('Volviendo al Dashboard');
      // En una aplicación real, aquí se navegaría de vuelta
    }

    // Event Listeners para propiedades
    propertyList.addEventListener('click', (e) => {
      const propertyItem = e.target.closest('.property-item');
      if (propertyItem) {
        toggleProperty(propertyItem);
      }
    });

    // Event Listeners para contenido
    contentOptions.addEventListener('click', (e) => {
      const contentItem = e.target.closest('.content-item');
      if (contentItem) {
        toggleContent(contentItem);
      }
    });

    // Event Listener para generar reporte
    generateBtn.addEventListener('click', generateReport);

    // Event Listener para descargar reporte
    downloadBtn.addEventListener('click', downloadReport);

    // Event Listener para botón de volver
    backButton.addEventListener('click', goBack);

    // Event Listeners para los selectores de período
    monthSelect.addEventListener('change', (e) => {
      state.month = parseInt(e.target.value);
    });

    yearSelect.addEventListener('change', (e) => {
      state.year = parseInt(e.target.value);
    });

    // Event Listener para cerrar modal al hacer clic fuera
    successModal.addEventListener('click', (e) => {
      if (e.target === successModal) {
        successModal.classList.remove('show');
      }
    });

    // Event Listeners para botones de descarga del historial
    document.querySelectorAll('.history-item .download-btn').forEach(btn => {
      btn.addEventListener('click', (e) => {
        const historyItem = e.target.closest('.history-item');
        const title = historyItem.querySelector('.history-title').textContent;
        console.log(`Descargando: ${title}`);
      });
    });

    // Inicializar el estado del botón
    updateGenerateButton();
  </script>
</body>
</html>